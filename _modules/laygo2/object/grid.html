
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>laygo2.object.grid &#8212; LAYGO2 Documentation  documentation</title>
    
  <link href="../../../_static/css/theme.css" rel="stylesheet">
  <link href="../../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/blank.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/autoclasstoc.css" />
    
  <link rel="preload" as="script" href="../../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../../../index.html">
<p class="title">LAYGO2 Documentation</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../introduction_link.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../examples_link.html">
  Trial
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../structure_link.html">
  Structure
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../technology_link.html">
  Tech Setup
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../introduction_kor.html">
  Korean
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../laygo2.html">
  API Reference
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <h1>Source code for laygo2.object.grid</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1">########################################################################################################################</span>
<span class="c1">#</span>
<span class="c1"># Copyright (c) 2014, Regents of the University of California</span>
<span class="c1"># All rights reserved.</span>
<span class="c1">#</span>
<span class="c1"># Redistribution and use in source and binary forms, with or without modification, are permitted provided that the</span>
<span class="c1"># following conditions are met:</span>
<span class="c1">#</span>
<span class="c1"># 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following</span>
<span class="c1">#   disclaimer.</span>
<span class="c1"># 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the</span>
<span class="c1">#    following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<span class="c1">#</span>
<span class="c1"># THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES,</span>
<span class="c1"># INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</span>
<span class="c1"># DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<span class="c1"># SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span>
<span class="c1"># SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,</span>
<span class="c1"># WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<span class="c1"># OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<span class="c1">#</span>
<span class="c1">########################################################################################################################</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Module containing functions and objects related to abstract coordinate system and coordinate conversion.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Jaeduk Han&quot;</span>
<span class="n">__maintainer__</span> <span class="o">=</span> <span class="s2">&quot;Jaeduk Han&quot;</span>
<span class="n">__status__</span> <span class="o">=</span> <span class="s2">&quot;Prototype&quot;</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">laygo2.object</span>
<span class="c1">#import laygo2.util.conversion as cv</span>


<span class="c1"># Internal functions.</span>
<span class="k">def</span> <span class="nf">_extend_index_dim</span><span class="p">(</span><span class="n">input_index</span><span class="p">,</span> <span class="n">new_index</span><span class="p">,</span> <span class="n">new_index_max</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A helper function to be used for the multi-dimensional circular array indexing.</span>
<span class="sd">    It extends the dimension of the input array (input_index) that contains indexing information, with the additional</span>
<span class="sd">    indexing variable (new_index) provided. The new_index_max variable is specified in case of the new_index does not</span>
<span class="sd">    contain the maximum index information (perhaps when an open-end slice is given for the new_index).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Construct an iterator from new_index</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">new_index</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">)):</span>
        <span class="n">it</span> <span class="o">=</span> <span class="p">[</span><span class="n">new_index</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">new_index</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="c1"># slices don&#39;t work very well with multi-dimensional circular mappings.</span>
            <span class="n">it</span> <span class="o">=</span> <span class="n">_conv_slice_to_list</span><span class="p">(</span><span class="n">slice_obj</span><span class="o">=</span><span class="n">new_index</span><span class="p">,</span> <span class="n">stop_def</span><span class="o">=</span><span class="n">new_index_max</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">it</span> <span class="o">=</span> <span class="n">new_index</span>
    <span class="c1"># Index extension</span>
    <span class="k">if</span> <span class="n">input_index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">([</span><span class="n">i</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">output</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_i</span> <span class="ow">in</span> <span class="n">input_index</span><span class="p">:</span>
            <span class="n">output_row</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
                <span class="n">output_row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">_i</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="n">i</span><span class="p">]))</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">output_row</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">output</span>


<span class="k">def</span> <span class="nf">_conv_slice_to_list</span><span class="p">(</span><span class="n">slice_obj</span><span class="p">,</span> <span class="n">start_def</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stop_def</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">step_def</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert slice to list&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">slice_obj</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">start_def</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">slice_obj</span><span class="o">.</span><span class="n">start</span>
    <span class="k">if</span> <span class="n">slice_obj</span><span class="o">.</span><span class="n">stop</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">stop</span> <span class="o">=</span> <span class="n">stop_def</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">stop</span> <span class="o">=</span> <span class="n">slice_obj</span><span class="o">.</span><span class="n">stop</span>
    <span class="k">if</span> <span class="n">slice_obj</span><span class="o">.</span><span class="n">step</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">step</span> <span class="o">=</span> <span class="n">step_def</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">step</span> <span class="o">=</span> <span class="n">slice_obj</span><span class="o">.</span><span class="n">step</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">_conv_bbox_to_array</span><span class="p">(</span><span class="n">bbox</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert a bbox object to a 2-d array.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">array</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">row</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">c</span><span class="p">,</span> <span class="n">r</span><span class="p">])</span>
        <span class="n">array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_conv_bbox_to_list</span><span class="p">(</span><span class="n">bbox</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert a bbox object to a 2-d array.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">array</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">array</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">c</span><span class="p">,</span> <span class="n">r</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">array</span>


<span class="c1"># Internal classes</span>
<div class="viewcode-block" id="CircularMapping"><a class="viewcode-back" href="../../../laygo2.object.grid.CircularMapping.html#laygo2.object.grid.CircularMapping">[docs]</a><span class="k">class</span> <span class="nc">CircularMapping</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Basic circular mapping class (index number expands infinitely).</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    기본적인 순환맵핑(인덱싱 넘버가 무한히 확장) 클래스.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_elements</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;list: Array consisting of the elements of circular mapping.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; elements = [ 0, 35, 85, 130, 180 ] </span>
<span class="sd">    &gt;&gt;&gt; cm = CircularMapping( elements = elements ) </span>
<span class="sd">    &gt;&gt;&gt; cm.elements</span>
<span class="sd">    [ 0, 35, 85, 130, 180 ]</span>

<span class="sd">    .. image:: ../assets/img/object_grid_CircularMapping_elements.png</span>
<span class="sd">           :height: 250 </span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    순환 맵핑의 구성 요소로 이루어진 배열. </span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dtype</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">int</span>
    <span class="sd">&quot;&quot;&quot;type: Data type of circular mapping.</span>

<span class="sd">    </span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; elements = [ 0, 35, 85, 130, 180 ] </span>
<span class="sd">    &gt;&gt;&gt; cm = CircularMapping( elements = elements ) </span>
<span class="sd">    &gt;&gt;&gt; cm.dtype</span>
<span class="sd">    int</span>

<span class="sd">    .. image:: ../assets/img/object_grid_CircularMapping_dtype.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    순환 맵핑의 데이터 유형.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="CircularMapping.get_elements"><a class="viewcode-back" href="../../../laygo2.object.grid.CircularMapping.html#laygo2.object.grid.CircularMapping.get_elements">[docs]</a>    <span class="k">def</span> <span class="nf">get_elements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;numpy.ndarray: get the elements.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span></div>

<div class="viewcode-block" id="CircularMapping.set_elements"><a class="viewcode-back" href="../../../laygo2.object.grid.CircularMapping.html#laygo2.object.grid.CircularMapping.set_elements">[docs]</a>    <span class="k">def</span> <span class="nf">set_elements</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;numpy.ndarray: set the elements.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span></div>

    <span class="n">elements</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_elements</span><span class="p">,</span> <span class="n">set_elements</span><span class="p">)</span>
    <span class="sd">&quot;&quot;&quot;numpy.ndarray: the array that contains the physical coordinates of the grid.&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">shape</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;numpy.ndarray: Shape of circular mapping.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; elements = [ 0, 35, 85, 130, 180 ] </span>
<span class="sd">        &gt;&gt;&gt; cm = CircularMapping( elements = elements ) </span>
<span class="sd">        &gt;&gt;&gt; cm.shape </span>
<span class="sd">        [4]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_CircularMapping_shape.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        순환 맵핑의 shape. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<div class="viewcode-block" id="CircularMapping.__init__"><a class="viewcode-back" href="../../../laygo2.object.grid.CircularMapping.html#laygo2.object.grid.CircularMapping.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elements</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor function of CircularMapping class.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        elements : list</span>
<span class="sd">            elements.</span>
<span class="sd">        dtype : type</span>
<span class="sd">            data type of elements.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        laygo2.CicularMapping</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; elements = [ 0, 35, 85, 130, 180 ] </span>
<span class="sd">        &gt;&gt;&gt; cm = CircularMapping( elements = elements ) </span>
<span class="sd">        &gt;&gt;&gt; cm.shape </span>
<span class="sd">        [4]</span>
<span class="sd">        &gt;&gt;&gt; cm[5] </span>
<span class="sd">        35 </span>
<span class="sd">        &gt;&gt;&gt; cm[0:10] </span>
<span class="sd">        [0, 35, 85, 130, 0, 35, 85, 130, 0, 35]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_CircularMapping_init.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        CircularMapping 클래스의 생성자함수</span>
<span class="sd">        파라미터</span>
<span class="sd">        elements(list): 구성 요소</span>
<span class="sd">        dtype(type): 구성 요소의 datatype</span>
<span class="sd">        반환값</span>
<span class="sd">        laygo2.CicularMapping</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dtype</span> <span class="o">=</span> <span class="n">dtype</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elements</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">elements</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span></div>

    <span class="c1"># indexing and slicing</span>
    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Element access function of circular mapping.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">pos</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="n">_conv_slice_to_list</span><span class="p">(</span><span class="n">slice_obj</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span> <span class="n">stop_def</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pos</span><span class="p">])</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pos</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;CircularMapping received an invalid index:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">pos</span><span class="p">))</span>

    <span class="c1"># Iterators</span>
    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Iteration function of circular mapping.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="fm">__iter__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Next element access function of circular mapping.&quot;&quot;&quot;</span>
        <span class="c1"># Check if numpy.ndarray implements __next__()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="fm">__next__</span><span class="p">()</span>

    <span class="c1"># Informative functions</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">summarize</span><span class="p">()</span>

<div class="viewcode-block" id="CircularMapping.summarize"><a class="viewcode-back" href="../../../laygo2.object.grid.CircularMapping.html#laygo2.object.grid.CircularMapping.summarize">[docs]</a>    <span class="k">def</span> <span class="nf">summarize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the summary of the object information.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> \
               <span class="s2">&quot;class: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> \
               <span class="s2">&quot;elements: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="CircularMappingArray"><a class="viewcode-back" href="../../../laygo2.object.grid.CircularMappingArray.html#laygo2.object.grid.CircularMappingArray">[docs]</a><span class="k">class</span> <span class="nc">CircularMappingArray</span><span class="p">(</span><span class="n">CircularMapping</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Multi-dimensional circular mapping class (index number expands infinitely).</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    다차원 순환맵핑(인덱싱 넘버가 무한히 확장) 클래스.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Element access function.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        pos : int</span>
<span class="sd">            index number being accessed.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        element</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; elements  = [[0,0], [35,0], [85,0], [130,0], </span>
<span class="sd">        &gt;&gt;&gt; cm = CircularMapping( elements = elements )</span>
<span class="sd">        &gt;&gt;&gt; cm[1] </span>
<span class="sd">        [ 35, 0 ] </span>
<span class="sd">        &gt;&gt;&gt; cm[3] </span>
<span class="sd">        [ 130, 0 ]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_CircularMappingArray_getitem.png</span>
<span class="sd">           :height: 250 </span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        순환 맵핑의 요소 접근함수</span>
<span class="sd">        파라미터</span>
<span class="sd">        index(int): 접근하려는 index 번호</span>
<span class="sd">        반환값</span>
<span class="sd">        element</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>  <span class="c1"># pos is containing multiple indices as a list</span>
            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pos</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">))</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pos</span><span class="p">])):</span>
            <span class="c1"># pos is mapped to a single element (pos is composed of integer indices).</span>
            <span class="c1"># just do rounding.</span>
            <span class="n">idx</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">p</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">):</span>
                <span class="n">idx</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span> <span class="o">%</span> <span class="n">s</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">idx</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># pos is mapped to multiple indices. (possible examples include ([0:5, 3], [[1,2,3], 3], ...).</span>
            <span class="c1"># Create a list containing the indices to iterate over, and return a numpy.ndarray containing items</span>
            <span class="c1"># corresponding to the indices in the list.</span>
            <span class="c1"># When the indices don&#39;t specify the lower boundary (e.g., [:5]), it iterates from 0.</span>
            <span class="c1"># When the indices don&#39;t specify the upper boundary (e.g., [3:]), it iterates to the maximum index defined.</span>
            <span class="n">idx</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
                <span class="n">idx</span> <span class="o">=</span> <span class="n">_extend_index_dim</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
            <span class="c1"># iterate and generate the list to return</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">idx</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>  <span class="c1"># -1 because the tuples in idx are flatten.</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">_null</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">ndenumerate</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
                <span class="n">item</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(</span><span class="n">idx</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">item</span><span class="p">)</span></div>


<div class="viewcode-block" id="_AbsToPhyGridConverter"><a class="viewcode-back" href="../../../laygo2.object.grid._AbsToPhyGridConverter.html#laygo2.object.grid._AbsToPhyGridConverter">[docs]</a><span class="k">class</span> <span class="nc">_AbsToPhyGridConverter</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class that converts abstract coordinates into physical coordinates. Conversely, conditional operation converts physical coordinates into abstract coordinates.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    추상 좌표를 물리 좌표로 변환하는 클래스, 조건부연산은 반대로 물리좌표를 추상좌표로 변환한다.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">master</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;laygo2.Grid or laygo2.OneDimGrid: Coordinate system to which _AbsToPhyGridConverter object belongs.</span>

<span class="sd">    </span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 180]) </span>
<span class="sd">    &gt;&gt;&gt; g1_y = OneDimGrid(name=&#39;ygrid&#39;, scope=[0,30], elements=[0]) </span>
<span class="sd">    &gt;&gt;&gt; g2   = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y) </span>
<span class="sd">    &gt;&gt;&gt; print( g1_x.abs2phy) </span>
<span class="sd">    &lt;laygo2.object.grid._AbsToPhyGridConverter object&gt; </span>
<span class="sd">    &gt;&gt;&gt; print( g2.xy) </span>
<span class="sd">    &lt;laygo2.object.grid._AbsToPhyGridConverter object&gt;</span>
<span class="sd">    &gt;&gt;&gt; print(g1_x.abs2phy.master) </span>
<span class="sd">    &lt;laygo2.object.grid.OneDimGrid object&gt;</span>
<span class="sd">    &gt;&gt;&gt; print(g2.xy.master) </span>
<span class="sd">    &lt;laygo2.object.grid.Grid object&gt;</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    _AbsToPhyGridConverter 객체가 속한 좌표계.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Constructor</span>
<div class="viewcode-block" id="_AbsToPhyGridConverter.__init__"><a class="viewcode-back" href="../../../laygo2.object.grid._AbsToPhyGridConverter.html#laygo2.object.grid._AbsToPhyGridConverter.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor function of _AbsToPhyGridConverter class.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span> <span class="o">=</span> <span class="n">master</span></div>

    <span class="c1"># Access functions.</span>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert abstract coordinates of the master grid into corresponding physical coordinates. </span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        pos : int</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int or numpy.ndarray</span>
<span class="sd">            physical coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 180]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=&#39;ygrid&#39;, scope=[0,30], elements=[0]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y)</span>
<span class="sd">        &gt;&gt;&gt; g1_x.abs2phy(0) </span>
<span class="sd">        0 </span>
<span class="sd">        &gt;&gt;&gt; g2.xy(0,0) </span>
<span class="sd">        [0,0]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_AbsToPhyGridConverter_call.png</span>
<span class="sd">           :height: 250 </span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        추상 좌표를 master 좌표계에서 대응되는 물리 좌표로 변환.</span>
<span class="sd">        파라미터</span>
<span class="sd">        pos(int): 추상 좌표</span>
<span class="sd">        반환값</span>
<span class="sd">        int or numpy.ndarray: 물리 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert abstract coordinates of the master grid into corresponding physical coordinates. </span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        pos : int</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int or numpy.ndarray</span>
<span class="sd">            physical coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 180]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=&#39;ygrid&#39;, scope=[0,30], elements=[0]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y)</span>
<span class="sd">        &gt;&gt;&gt; g1_x.abs2phy(0) </span>
<span class="sd">        0 </span>
<span class="sd">        &gt;&gt;&gt; g2.xy(0,0) </span>
<span class="sd">        [0,0]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_AbsToPhyGridConverter_getitem.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        추상 좌표를 master 좌표계에서 대응되는 물리 좌표로 변환.</span>
<span class="sd">        파라미터</span>
<span class="sd">        pos(int): 추상 좌표</span>
<span class="sd">        반환값</span>
<span class="sd">        int or numpy.ndarray: 물리 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;OneDimGrid&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">OneDimGrid</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_1d</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;Grid&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">Grid</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_2d</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

<div class="viewcode-block" id="_AbsToPhyGridConverter._getitem_1d"><a class="viewcode-back" href="../../../laygo2.object.grid._AbsToPhyGridConverter.html#laygo2.object.grid._AbsToPhyGridConverter._getitem_1d">[docs]</a>    <span class="k">def</span> <span class="nf">_getitem_1d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;An internal function of __getitem__() for 1-d grids.&quot;&quot;&quot;</span>
        <span class="c1"># Check if pos has multiple elements.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_1d</span><span class="p">(</span><span class="n">_conv_slice_to_list</span><span class="p">(</span><span class="n">slice_obj</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span> <span class="n">stop_def</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_1d</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_getitem_1d</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pos</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;_AbsToPhyConverter._getitem_1d does not accept None as its input.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># pos is a single element. Compute quotient and modulo for grid extension.</span>
            <span class="n">quo</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">mod</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">pos</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">pos</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">mod</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">pos</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="n">quo</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">((</span><span class="n">pos</span><span class="o">-</span><span class="n">mod</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="k">elif</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">mod</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">pos</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="n">quo</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">((</span><span class="n">pos</span><span class="o">-</span><span class="n">mod</span><span class="p">))</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">quo</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">mod</span><span class="p">]</span></div>
            <span class="c1"># the following command cannot handle the size extension of the grid, disabled.</span>
            <span class="c1"># return self.master.elements.take(pos, mode=&#39;wrap&#39;)</span>

<div class="viewcode-block" id="_AbsToPhyGridConverter._getitem_2d"><a class="viewcode-back" href="../../../laygo2.object.grid._AbsToPhyGridConverter.html#laygo2.object.grid._AbsToPhyGridConverter._getitem_2d">[docs]</a>    <span class="k">def</span> <span class="nf">_getitem_2d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;An internal function of __getitem__() for 2-d grids.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">)):</span>  <span class="c1"># single point</span>
                <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pos</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">)):</span>  <span class="c1"># single point</span>
                <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pos</span><span class="p">])</span>
        <span class="c1"># compute coordinates from OneDimGrids of its master.</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
        <span class="c1"># TODO: Refactor the following code to avoid the use of double for loops and list comprehensions.</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>  <span class="c1"># x and y are scalars.</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>  <span class="c1"># x is a scalar.</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">_y</span><span class="p">])</span> <span class="k">for</span> <span class="n">_y</span> <span class="ow">in</span> <span class="n">y</span><span class="p">])</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>  <span class="c1"># y is a scalar.</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">_x</span><span class="p">,</span> <span class="n">y</span><span class="p">])</span> <span class="k">for</span> <span class="n">_x</span> <span class="ow">in</span> <span class="n">x</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xy</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">_x</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>  <span class="c1"># vectorize this operation.</span>
                <span class="n">row</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">_y</span> <span class="ow">in</span> <span class="n">y</span><span class="p">:</span>
                    <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">_x</span><span class="p">,</span> <span class="n">_y</span><span class="p">]))</span>
                <span class="n">xy</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">row</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">xy</span><span class="p">)</span></div>

    <span class="c1"># Reverse-access operators (comparison operators are used for reverse-access).</span>
    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert physical coordinates into abstract coordinates of the master grid satisfying conditional operations.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : int</span>
<span class="sd">            physical coordinates.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int or numpy.ndarray</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 180]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=&#39;ygrid&#39;, scope=[0,30], elements=[0]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y)</span>
<span class="sd">        &gt;&gt;&gt; g1_x.abs2phy == 35 </span>
<span class="sd">        1 </span>
<span class="sd">        &gt;&gt;&gt; g2.xy == [35,35] </span>
<span class="sd">        [1,None]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_AbsToPhyGridConverter_eq.png</span>
<span class="sd">           :height: 250 </span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        물리 좌표를 master 좌표계에서 조건부 연산을 만족하는 추상 좌표로 변환.</span>
<span class="sd">        파라미터</span>
<span class="sd">        other(int): 물리 좌표</span>
<span class="sd">        반환값</span>
<span class="sd">        int or numpy.ndarray: 추상 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">phy2abs</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert physical coordinates into abstract coordinates of the master grid satisfying conditional operations.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : int</span>
<span class="sd">            physical coordinates.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int or numpy.ndarray</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 180]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=&#39;ygrid&#39;, scope=[0,30], elements=[0]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y)</span>
<span class="sd">        &gt;&gt;&gt; g1_x.abs2phy &lt; 35 </span>
<span class="sd">        0 </span>
<span class="sd">        &gt;&gt;&gt; g2.xy &lt; [35,35] </span>
<span class="sd">        [0,1]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_AbsToPhyGridConverter_lt.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        물리 좌표를 master 좌표계에서 조건부 연산을 만족하는 추상 좌표로 변환.</span>
<span class="sd">        파라미터</span>
<span class="sd">        other(int): 물리 좌표</span>
<span class="sd">        반환값</span>
<span class="sd">        int or numpy.ndarray: 추상 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;OneDimGrid&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">OneDimGrid</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lt_1d</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;Grid&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">Grid</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lt_2d</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

<div class="viewcode-block" id="_AbsToPhyGridConverter._phy2abs_operator"><a class="viewcode-back" href="../../../laygo2.object.grid._AbsToPhyGridConverter.html#laygo2.object.grid._AbsToPhyGridConverter._phy2abs_operator">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_phy2abs_operator</span><span class="p">(</span> <span class="n">other</span><span class="p">,</span> <span class="n">elements</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">shape</span><span class="p">,</span> <span class="n">op</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">phy2abs</span><span class="p">(</span> <span class="n">x</span> <span class="p">):</span>
            <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">quo_coarce</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">+</span> <span class="n">x</span> <span class="o">//</span> <span class="n">width</span>
                <span class="n">msb_sub</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">quo_coarce</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">+</span> <span class="n">x</span> <span class="o">//</span> <span class="n">width</span>
                <span class="n">msb_sub</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="n">remain</span> <span class="o">=</span> <span class="n">x</span> <span class="o">%</span> <span class="n">width</span>  <span class="c1"># positive</span>
            <span class="n">msb</span> <span class="o">=</span> <span class="n">quo_coarce</span> <span class="o">*</span> <span class="n">shape</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">ndenumerate</span><span class="p">(</span><span class="n">elements</span><span class="p">):</span>
                <span class="c1"># print(&quot;e: %d r:%d, m:%d, i:%d off:%d phy:%d &quot; %(e, remain, msb + i[0], i[0], lsb_offset, quo_coarce*width + e   ))</span>
                <span class="c1"># print(comp( e , remain ))</span>

                <span class="k">if</span> <span class="n">comp</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">remain</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>  <span class="c1"># find maximum less then remain , e &lt; r</span>
                    <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>                        <span class="c1"># when it is False, latest true index</span>
                    <span class="k">return</span> <span class="n">msb</span> <span class="o">+</span> <span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">lsb_offset</span>

            <span class="k">return</span> <span class="n">msb</span> <span class="o">+</span> <span class="n">shape</span> <span class="o">+</span> <span class="n">lsb_offset</span>

        <span class="k">if</span> <span class="n">op</span> <span class="o">==</span> <span class="s2">&quot;&lt;&quot;</span><span class="p">:</span>  <span class="c1">## max lesser</span>
            <span class="n">comp</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">e</span><span class="p">,</span> <span class="n">r</span><span class="p">:</span> <span class="n">e</span> <span class="o">&lt;</span> <span class="n">r</span>
            <span class="n">lsb_offset</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">elif</span> <span class="n">op</span> <span class="o">==</span> <span class="s2">&quot;&lt;=&quot;</span><span class="p">:</span>  <span class="c1">## eq or max lesser eq</span>
            <span class="n">comp</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">e</span><span class="p">,</span> <span class="n">r</span><span class="p">:</span> <span class="n">e</span> <span class="o">&lt;=</span> <span class="n">r</span>
            <span class="n">lsb_offset</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">elif</span> <span class="n">op</span> <span class="o">==</span> <span class="s2">&quot;&gt;&quot;</span><span class="p">:</span>  <span class="c1">## min greater</span>
            <span class="n">comp</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">e</span><span class="p">,</span> <span class="n">r</span><span class="p">:</span> <span class="n">e</span> <span class="o">&lt;=</span> <span class="n">r</span>
            <span class="n">lsb_offset</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="k">elif</span> <span class="n">op</span> <span class="o">==</span> <span class="s2">&quot;&gt;=&quot;</span><span class="p">:</span>  <span class="c1">## eq or min greater</span>
            <span class="n">comp</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">e</span><span class="p">,</span> <span class="n">r</span><span class="p">:</span> <span class="n">e</span> <span class="o">&lt;</span> <span class="n">r</span>
            <span class="n">lsb_offset</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">)):</span>
           <span class="k">return</span> <span class="n">phy2abs</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">list_return</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">other</span><span class="p">:</span>
                <span class="n">list_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">phy2abs</span><span class="p">(</span><span class="n">o</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span> <span class="n">list_return</span> <span class="p">)</span></div>


<div class="viewcode-block" id="_AbsToPhyGridConverter._lt_1d"><a class="viewcode-back" href="../../../laygo2.object.grid._AbsToPhyGridConverter.html#laygo2.object.grid._AbsToPhyGridConverter._lt_1d">[docs]</a>    <span class="k">def</span> <span class="nf">_lt_1d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phy2abs_operator</span><span class="p">(</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">elements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;&lt;&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="_AbsToPhyGridConverter._lt_2d"><a class="viewcode-back" href="../../../laygo2.object.grid._AbsToPhyGridConverter.html#laygo2.object.grid._AbsToPhyGridConverter._lt_2d">[docs]</a>    <span class="k">def</span> <span class="nf">_lt_2d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">other</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_lt_2d</span><span class="p">(</span><span class="n">o</span><span class="p">)</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">other</span><span class="p">])</span></div>

    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert physical coordinates into abstract coordinates of the master grid satisfying conditional operations.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : int</span>
<span class="sd">            physical coordinates.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int or numpy.ndarray</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 180]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=&#39;ygrid&#39;, scope=[0,30], elements=[0]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y)</span>
<span class="sd">        &gt;&gt;&gt; g1_x.abs2phy &lt;= 35 </span>
<span class="sd">        1 </span>
<span class="sd">        &gt;&gt;&gt; g2.xy &lt;= [35,35] </span>
<span class="sd">        [1,1]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_AbsToPhyGridConverter_le.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        물리 좌표를 master 좌표계에서 조건부 연산을 만족하는 추상 좌표로 변환.</span>
<span class="sd">        파라미터</span>
<span class="sd">        other(int): 물리 좌표</span>
<span class="sd">        반환값</span>
<span class="sd">        int or numpy.ndarray: 추상 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;OneDimGrid&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">OneDimGrid</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_le_1d</span><span class="p">(</span><span class="n">other</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;Grid&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">Grid</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_le_2d</span><span class="p">(</span><span class="n">other</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>

<div class="viewcode-block" id="_AbsToPhyGridConverter._le_1d"><a class="viewcode-back" href="../../../laygo2.object.grid._AbsToPhyGridConverter.html#laygo2.object.grid._AbsToPhyGridConverter._le_1d">[docs]</a>    <span class="k">def</span> <span class="nf">_le_1d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phy2abs_operator</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">elements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;&lt;=&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="_AbsToPhyGridConverter._le_2d"><a class="viewcode-back" href="../../../laygo2.object.grid._AbsToPhyGridConverter.html#laygo2.object.grid._AbsToPhyGridConverter._le_2d">[docs]</a>    <span class="k">def</span> <span class="nf">_le_2d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_le_2d</span><span class="p">(</span><span class="n">o</span><span class="p">)</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">other</span><span class="p">])</span></div>

    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert physical coordinates into abstract coordinates of the master grid satisfying conditional operations.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : int</span>
<span class="sd">            physical coordinates.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int or numpy.ndarray</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 180]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=&#39;ygrid&#39;, scope=[0,30], elements=[0]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y)</span>
<span class="sd">        &gt;&gt;&gt; g1_x.abs2phy &gt; 35 </span>
<span class="sd">        2 </span>
<span class="sd">        &gt;&gt;&gt; g2.xy &gt; [35,35] </span>
<span class="sd">        [2,2]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_AbsToPhyGridConverter_gt.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        물리 좌표를 master 좌표계에서 조건부 연산을 만족하는 추상 좌표로 변환.</span>
<span class="sd">        파라미터</span>
<span class="sd">        other(int): 물리 좌표</span>
<span class="sd">        반환값</span>
<span class="sd">        int or numpy.ndarray: 추상 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;OneDimGrid&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">OneDimGrid</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gt_1d</span><span class="p">(</span><span class="n">other</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;Grid&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">Grid</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gt_2d</span><span class="p">(</span><span class="n">other</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>

<div class="viewcode-block" id="_AbsToPhyGridConverter._gt_1d"><a class="viewcode-back" href="../../../laygo2.object.grid._AbsToPhyGridConverter.html#laygo2.object.grid._AbsToPhyGridConverter._gt_1d">[docs]</a>    <span class="k">def</span> <span class="nf">_gt_1d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phy2abs_operator</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">elements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;&gt;&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="_AbsToPhyGridConverter._gt_2d"><a class="viewcode-back" href="../../../laygo2.object.grid._AbsToPhyGridConverter.html#laygo2.object.grid._AbsToPhyGridConverter._gt_2d">[docs]</a>    <span class="k">def</span> <span class="nf">_gt_2d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="n">other</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_gt_2d</span><span class="p">(</span><span class="n">o</span><span class="p">)</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">other</span><span class="p">])</span></div>

    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert physical coordinates into abstract coordinates of the master grid satisfying conditional operations.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : int</span>
<span class="sd">            physical coordinates.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int or numpy.ndarray</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 180]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=&#39;ygrid&#39;, scope=[0,30], elements=[0]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y)</span>
<span class="sd">        &gt;&gt;&gt; g1_x.abs2phy &gt;= 35 </span>
<span class="sd">        1 </span>
<span class="sd">        &gt;&gt;&gt; g2.xy &gt;= [35,35] </span>
<span class="sd">        [1,2]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_AbsToPhyGridConverter_ge.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        물리 좌표를 master 좌표계에서 조건부 연산을 만족하는 추상 좌표로 변환.</span>
<span class="sd">        파라미터</span>
<span class="sd">        other(int): 물리 좌표</span>
<span class="sd">        반환값</span>
<span class="sd">        int or numpy.ndarray: 추상 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;OneDimGrid&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">OneDimGrid</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ge_1d</span><span class="p">(</span><span class="n">other</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;Grid&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">Grid</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ge_2d</span><span class="p">(</span><span class="n">other</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>

<div class="viewcode-block" id="_AbsToPhyGridConverter._ge_1d"><a class="viewcode-back" href="../../../laygo2.object.grid._AbsToPhyGridConverter.html#laygo2.object.grid._AbsToPhyGridConverter._ge_1d">[docs]</a>    <span class="k">def</span> <span class="nf">_ge_1d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phy2abs_operator</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">elements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;&gt;=&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="_AbsToPhyGridConverter._ge_2d"><a class="viewcode-back" href="../../../laygo2.object.grid._AbsToPhyGridConverter.html#laygo2.object.grid._AbsToPhyGridConverter._ge_2d">[docs]</a>    <span class="k">def</span> <span class="nf">_ge_2d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_ge_2d</span><span class="p">(</span><span class="n">o</span><span class="p">)</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">other</span><span class="p">])</span></div></div>


<div class="viewcode-block" id="_PhyToAbsGridConverter"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter">[docs]</a><span class="k">class</span> <span class="nc">_PhyToAbsGridConverter</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class that converts physical coordinates into abstract coordinates. </span>
<span class="sd">    Conversely, conditional operations convert abstract coordinates into physical coordinates.</span>
<span class="sd">    Implements the function of converting abstract coordinates to physical coordinates and supports the inverse conversion function.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    물리 좌표를 추상 좌표로 변환하는 클래스, 조건부연산은 반대로 추상 좌표를 물리 좌표로 변환한다.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">master</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;laygo2.Grid or laygo2.OneDimGrid: Coordinate system to which _PhyToAbsGridConverter object belongs.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 180]) </span>
<span class="sd">    &gt;&gt;&gt; g1_y = OneDimGrid(name=&#39;ygrid&#39;, scope=[0,30], elements=[0]) </span>
<span class="sd">    &gt;&gt;&gt; g2   = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y) </span>
<span class="sd">    &gt;&gt;&gt; print(g1_x.phy2abs) </span>
<span class="sd">    &lt;laygo2.object.grid._PhyToAbsGridConverter object&gt; </span>
<span class="sd">    &gt;&gt;&gt; print(g2.mn) </span>
<span class="sd">    &lt;laygo2.object.grid._PhyToAbsGridConverter object&gt;</span>
<span class="sd">    &gt;&gt;&gt; print(g1_x.phy2abs.master) </span>
<span class="sd">    &lt;laygo2.object.grid.OneDimGrid object&gt;</span>
<span class="sd">    &gt;&gt;&gt; print(g2.mn.master) </span>
<span class="sd">    &lt;laygo2.object.grid.Grid object&gt;</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    _PhyToAbsGridConverter 객체가 속한 좌표계.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Constructor</span>
<div class="viewcode-block" id="_PhyToAbsGridConverter.__init__"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor function of _PhyToAbsGridConverter class.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span> <span class="o">=</span> <span class="n">master</span></div>

    <span class="c1"># Access functions.</span>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert physical coordinates into the corresponding abstract coordinates of the master grid. </span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        pos : int </span>
<span class="sd">            physical coordinates.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int or numpy.ndarray</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 180]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=&#39;ygrid&#39;, scope=[0,30], elements=[0]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y)</span>
<span class="sd">        &gt;&gt;&gt; g1_x.phy2abs(35) </span>
<span class="sd">        1 </span>
<span class="sd">        &gt;&gt;&gt; g2.mn( [[35,35]]) </span>
<span class="sd">        [1,None]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_PhyToAbsGridConverter_call.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        물리 좌표를 master 좌표계에서 대응되는 추상 좌표로 변환.</span>
<span class="sd">        파라미터</span>
<span class="sd">        pos(int): 물리 좌표</span>
<span class="sd">        반환값</span>
<span class="sd">        int or numpy.ndarray: 추상 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert physical coordinates into the corresponding abstract coordinates of the master grid. </span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        pos : int </span>
<span class="sd">            physical coordinates.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int or numpy.ndarray</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 180]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=&#39;ygrid&#39;, scope=[0,30], elements=[0]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y)</span>
<span class="sd">        &gt;&gt;&gt; g1_x.phy2abs(35) </span>
<span class="sd">        1 </span>
<span class="sd">        &gt;&gt;&gt; g2.mn( [[35,35]]) </span>
<span class="sd">        [1,None]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_PhyToAbsGridConverter_getItem.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        물리 좌표를 master 좌표계에서 대응되는 추상 좌표로 변환.</span>
<span class="sd">        파라미터</span>
<span class="sd">        pos(int): 물리 좌표</span>
<span class="sd">        반환값</span>
<span class="sd">        int or numpy.ndarray: 추상 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;OneDimGrid&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">OneDimGrid</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_1d</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;Grid&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">Grid</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_2d</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

<div class="viewcode-block" id="_PhyToAbsGridConverter._getitem_1d"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter._getitem_1d">[docs]</a>    <span class="k">def</span> <span class="nf">_getitem_1d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;An internal function of __getitem__() for 1-d grids.&quot;&quot;&quot;</span>
        <span class="c1"># Check if pos has multiple elements.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">OneDimGrid</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_1d</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="n">pos</span><span class="o">.</span><span class="n">elements</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_1d</span><span class="p">(</span><span class="n">_conv_slice_to_list</span><span class="p">(</span><span class="n">slice_obj</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span> <span class="n">stop_def</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_1d</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_getitem_1d</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pos</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;_AbsToPhyConverter._getitem_1d does not accept None as its input.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># pos is a single element.</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">ndenumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">elements</span><span class="p">):</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">pos</span> <span class="o">-</span> <span class="n">e</span><span class="p">)</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">width</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">((</span><span class="n">pos</span> <span class="o">-</span> <span class="n">e</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">width</span><span class="p">))</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># no matched coordinate</span></div>

<div class="viewcode-block" id="_PhyToAbsGridConverter._getitem_2d"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter._getitem_2d">[docs]</a>    <span class="k">def</span> <span class="nf">_getitem_2d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;An internal function of __getitem__() for 2-d grid.&quot;&quot;&quot;</span>
        <span class="c1"># If pos contains multiple coordinates (or objects), convert recursively.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">)):</span>  <span class="c1"># It&#39;s actually a single coordinate.</span>
                <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pos</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">)):</span>  <span class="c1"># It&#39;s actually a single coordinate.</span>
                <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pos</span><span class="p">])</span>
        <span class="c1"># If pos contains only one physical object, convert its bounding box to abstract coordinates</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;PhysicalObject&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">laygo2</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">PhysicalObject</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="c1"># If pos contains only one coordinate, convert it to abstract grid.</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">y</span> <span class="o">==</span> <span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="c1"># refactor the following code to avoid the use of double for-loops and list comprehensions.</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>  <span class="c1"># x and y are scalars.</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>  <span class="c1"># x is a scalar.</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">m</span><span class="p">,</span> <span class="n">_n</span><span class="p">])</span> <span class="k">for</span> <span class="n">_n</span> <span class="ow">in</span> <span class="n">n</span><span class="p">])</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>  <span class="c1"># y is a scalar.</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">_m</span><span class="p">,</span> <span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">_m</span> <span class="ow">in</span> <span class="n">m</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mn</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">_m</span> <span class="ow">in</span> <span class="n">m</span><span class="p">:</span>  <span class="c1"># vectorize this operation.</span>
                <span class="n">row</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">_n</span> <span class="ow">in</span> <span class="n">n</span><span class="p">:</span>
                    <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">_m</span><span class="p">,</span> <span class="n">_n</span><span class="p">]))</span>
                <span class="n">mn</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">row</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">mn</span><span class="p">)</span></div>

    <span class="c1"># Reverse-access operators (comparison operators are used for reverse-access).</span>
    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert abstract coordinates into physical coordinates satisfying conditional operations in the master grid.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : int</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int or numpy.ndarray</span>
<span class="sd">            physical coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 180]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=&#39;ygrid&#39;, scope=[0,30], elements=[0]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y)</span>
<span class="sd">        &gt;&gt;&gt; g1_x.phy2abs == 1 </span>
<span class="sd">        35 </span>
<span class="sd">        &gt;&gt;&gt; g2.mn == [1,1] </span>
<span class="sd">        [35,30]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_PhyToAbsGridConverter_eq.png</span>
<span class="sd">           :height: 250 </span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        추상 좌표를 master 좌표계에서 조건부 연산을 만족하는 물리 좌표로 변환. </span>
<span class="sd">        파라미터</span>
<span class="sd">        other(int): 추상 좌표</span>
<span class="sd">        반환값</span>
<span class="sd">        int or numpy.ndarray: 물리 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">abs2phy</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        if (self.master.__class__.__name__ == &#39;OneDimGrid&#39;) or (issubclass(self.master.__class__, OneDimGrid)):</span>
<span class="sd">            return self._eq_1d(other=other)</span>
<span class="sd">        if (self.master.__class__.__name__ == &#39;Grid&#39;) or (issubclass(self.master.__class__, Grid)):</span>
<span class="sd">            return self._eq_2d(other=other)</span>

<span class="sd">    def _eq_1d(self, other):</span>
<span class="sd">        return self._getitem_1d(pos=other)</span>

<span class="sd">    def _eq_2d(self, other):</span>
<span class="sd">        # If other is a physical object, convert its bounding box to abstract coordinates.</span>
<span class="sd">        if (other.__class__.__name__ == &#39;PhysicalObject&#39;) or (issubclass(other.__class__, laygo2.object.PhysicalObject)):</span>
<span class="sd">            mn0 = self.master &gt;= other.bbox[0]</span>
<span class="sd">            mn1 = self.master &lt;= other.bbox[1]</span>
<span class="sd">            return np.array([mn0, mn1])</span>
<span class="sd">        if isinstance(other[0], (int, np.integer)):</span>
<span class="sd">            return np.array([self.master.m[other[0]],</span>
<span class="sd">                             self.master.n[other[1]]])</span>
<span class="sd">        else:</span>
<span class="sd">            return np.array([self._eq_2d(o) for o in other])</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert abstract coordinates into physical coordinates satisfying conditional operations in the master grid.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : int</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int or numpy.ndarray</span>
<span class="sd">            physical coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 180]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=&#39;ygrid&#39;, scope=[0,30], elements=[0]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y)</span>
<span class="sd">        &gt;&gt;&gt; g1_x.phy2abs &lt; 1 </span>
<span class="sd">        0 </span>
<span class="sd">        &gt;&gt;&gt; g2.mn &lt; [1,1] </span>
<span class="sd">        [0,0]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_PhyToAbsGridConverter_lt.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        추상 좌표를 master 좌표계에서 조건부 연산을 만족하는 물리 좌표로 변환. </span>
<span class="sd">        파라미터</span>
<span class="sd">        other(int): 추상 좌표</span>
<span class="sd">        반환값</span>
<span class="sd">        int or numpy.ndarray: 물리 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;OneDimGrid&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">OneDimGrid</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lt_1d</span><span class="p">(</span><span class="n">other</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;Grid&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">Grid</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lt_2d</span><span class="p">(</span><span class="n">other</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>

<div class="viewcode-block" id="_PhyToAbsGridConverter._lt_1d"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter._lt_1d">[docs]</a>    <span class="k">def</span> <span class="nf">_lt_1d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">abs2phy</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="n">other</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_lt_1d</span><span class="p">(</span><span class="n">o</span><span class="p">)</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">other</span><span class="p">])</span></div>

<div class="viewcode-block" id="_PhyToAbsGridConverter._lt_2d"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter._lt_2d">[docs]</a>    <span class="k">def</span> <span class="nf">_lt_2d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">abs2phy</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">other</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_lt_2d</span><span class="p">(</span><span class="n">o</span><span class="p">)</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">other</span><span class="p">])</span></div>

    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert abstract coordinates into physical coordinates satisfying conditional operations in the master grid.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : int</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int or numpy.ndarray</span>
<span class="sd">            physical coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 180]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=&#39;ygrid&#39;, scope=[0,30], elements=[0]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y)</span>
<span class="sd">        &gt;&gt;&gt; g1_x.phy2abs &lt;= 1 </span>
<span class="sd">        35 </span>
<span class="sd">        &gt;&gt;&gt; g2.mn &lt;= [1,1] </span>
<span class="sd">        [35,30]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_PhyToAbsGridConverter_le.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        추상 좌표를 master 좌표계에서 조건부 연산을 만족하는 물리 좌표로 변환. </span>
<span class="sd">        파라미터</span>
<span class="sd">        other(int): 추상 좌표</span>
<span class="sd">        반환값</span>
<span class="sd">        int or numpy.ndarray: 물리 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">abs2phy</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert abstract coordinates into physical coordinates satisfying conditional operations in the master grid.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : int</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int or numpy.ndarray</span>
<span class="sd">            physical coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 180]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=&#39;ygrid&#39;, scope=[0,30], elements=[0]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y)</span>
<span class="sd">        &gt;&gt;&gt; g1_x.phy2abs &gt; 1 </span>
<span class="sd">        85 </span>
<span class="sd">        &gt;&gt;&gt; g2.mn &gt; [1,1] </span>
<span class="sd">        [85,60]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_PhyToAbsGridConverter_gt.png</span>
<span class="sd">           :height: 250 </span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        추상 좌표를 master 좌표계에서 조건부 연산을 만족하는 물리 좌표로 변환. </span>
<span class="sd">        파라미터</span>
<span class="sd">        other(int): 추상 좌표</span>
<span class="sd">        반환값</span>
<span class="sd">        int or numpy.ndarray: 물리 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;OneDimGrid&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">OneDimGrid</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gt_1d</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;Grid&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">Grid</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gt_2d</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

<div class="viewcode-block" id="_PhyToAbsGridConverter._gt_1d"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter._gt_1d">[docs]</a>    <span class="k">def</span> <span class="nf">_gt_1d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">abs2phy</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="n">other</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_gt_1d</span><span class="p">(</span><span class="n">o</span><span class="p">)</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">other</span><span class="p">])</span></div>

<div class="viewcode-block" id="_PhyToAbsGridConverter._gt_2d"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter._gt_2d">[docs]</a>    <span class="k">def</span> <span class="nf">_gt_2d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">abs2phy</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">other</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_gt_2d</span><span class="p">(</span><span class="n">o</span><span class="p">)</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">other</span><span class="p">])</span></div>

    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert abstract coordinates into physical coordinates satisfying conditional operations in the master grid.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : int</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int or numpy.ndarray</span>
<span class="sd">            physical coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 180]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=&#39;ygrid&#39;, scope=[0,30], elements=[0]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y)</span>
<span class="sd">        &gt;&gt;&gt; g1_x.phy2abs &gt;= 1 </span>
<span class="sd">        35 </span>
<span class="sd">        &gt;&gt;&gt; g2.mn &gt;=[1,1] </span>
<span class="sd">        [35,30]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_PhyToAbsGridConverter_ge.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        추상 좌표를 master 좌표계에서 조건부 연산을 만족하는 물리 좌표로 변환. </span>
<span class="sd">        파라미터</span>
<span class="sd">        other(int): 추상 좌표</span>
<span class="sd">        반환값</span>
<span class="sd">        int or numpy.ndarray: 물리 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">abs2phy</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>

<div class="viewcode-block" id="_PhyToAbsGridConverter.bbox"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter.bbox">[docs]</a>    <span class="k">def</span> <span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the bounding box of the object into the abstract coordinates of the master grid.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        obj : laygo2.physical</span>
<span class="sd">            object having physical coordinate.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numy.ndarray</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x    = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 100], elements=[10, 20, 40, 50, 60]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y    = OneDimGrid(name=&#39;ygrid&#39;, scope=[0, 100], elements=[10, 20, 40, 50, 60]) </span>
<span class="sd">        &gt;&gt;&gt; g2      = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y) </span>
<span class="sd">        &gt;&gt;&gt; phy2abs = _PhyToAbsGridConverter(master=g2) </span>
<span class="sd">        &gt;&gt;&gt; rect0 = physical.Rect(xy=[[0, 0], [100, 100]], layer=[&#39;M1&#39;, &#39;drawing&#39;], netname=&#39;net0’) </span>
<span class="sd">        &gt;&gt;&gt; phy2abs.bbox(rect0) </span>
<span class="sd">        [[0, 0] , [4, 4]]</span>
<span class="sd">        &gt;&gt;&gt; g2.mn.bbox(rect0) </span>
<span class="sd">        [[0, 0] , [4, 4]]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_PhyToAbsGridConverter_bbox.png</span>
<span class="sd">           :height: 250 </span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        객체의 bounding box를 master 좌표계의 추상 좌표로 변환.</span>
<span class="sd">        _AbsToPhyGridConverter 객체의 &gt;=, &lt;=를 사용하므로 추상면적이 작아질수있다.</span>
<span class="sd">        파라미터</span>
<span class="sd">        obj(laygo2.physical): 물리좌표정보를 갖고있는 객체</span>
<span class="sd">        반환값</span>
<span class="sd">        numpy.ndarray: 추상 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;PhysicalObject&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">laygo2</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">PhysicalObject</span><span class="p">)):</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">bbox</span>

        <span class="c1"># phy -&gt; abs</span>
        <span class="n">mn0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">xy</span> <span class="o">&gt;=</span> <span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1">## ge than lower left</span>
        <span class="n">mn1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">xy</span> <span class="o">&lt;=</span> <span class="n">obj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c1">## le than upper right\</span>


        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">mn0</span><span class="p">,</span> <span class="n">mn1</span><span class="p">])</span></div>

<div class="viewcode-block" id="_PhyToAbsGridConverter.bottom_left"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter.bottom_left">[docs]</a>    <span class="k">def</span> <span class="nf">bottom_left</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert an object&#39;s physical corner coordinates into abstract coordinates of the master grid.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        obj : laygo2.physical</span>
<span class="sd">            object having physical coordinate. </span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numy.ndarray</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x    = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 100], elements=[10, 20, 40, 50, 60]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y    = OneDimGrid(name=&#39;ygrid&#39;, scope=[0, 100], elements=[10, 20, 40, 50, 60]) </span>
<span class="sd">        &gt;&gt;&gt; g2      = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y) </span>
<span class="sd">        &gt;&gt;&gt; phy2abs = _PhyToAbsGridConverter(master=g2) </span>
<span class="sd">        &gt;&gt;&gt; rect0 = physical.Rect(xy=[[0, 0], [100, 100]], layer=[&#39;M1&#39;, &#39;drawing&#39;], netname=&#39;net0’) </span>
<span class="sd">        &gt;&gt;&gt; phy2abs.bottom_left(rect0) </span>
<span class="sd">        [0, 0]</span>
<span class="sd">        &gt;&gt;&gt; g2.mn.bottom_left(rect0) </span>
<span class="sd">        [0, 0]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_PhyToAbsGridConverter_bottom_left.png</span>
<span class="sd">           :height: 250 </span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        객체의 물리 코너 좌표를 master 좌표계의 추상 좌표로 변환.</span>
<span class="sd">        파라미터</span>
<span class="sd">        obj(laygo2.physical): 물리좌표정보를 갖고있는 객체</span>
<span class="sd">        반환값</span>
<span class="sd">        numpy.ndarray: 추상 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;PhysicalObject&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">laygo2</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">PhysicalObject</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bottom_left</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">_i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>

<div class="viewcode-block" id="_PhyToAbsGridConverter.bottom_right"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter.bottom_right">[docs]</a>    <span class="k">def</span> <span class="nf">bottom_right</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert an object&#39;s physical corner coordinates into abstract coordinates of the master grid.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        obj : laygo2.physical</span>
<span class="sd">            object having physical coordinate. </span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numy.ndarray</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x    = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 100], elements=[10, 20, 40, 50, 60]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y    = OneDimGrid(name=&#39;ygrid&#39;, scope=[0, 100], elements=[10, 20, 40, 50, 60]) </span>
<span class="sd">        &gt;&gt;&gt; g2      = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y) </span>
<span class="sd">        &gt;&gt;&gt; phy2abs = _PhyToAbsGridConverter(master=g2) </span>
<span class="sd">        &gt;&gt;&gt; rect0 = physical.Rect(xy=[[0, 0], [100, 100]], layer=[&#39;M1&#39;, &#39;drawing&#39;], netname=&#39;net0’) </span>
<span class="sd">        &gt;&gt;&gt; phy2abs.bottom_right(rect0) </span>
<span class="sd">        [4, 0]</span>
<span class="sd">        &gt;&gt;&gt; g2.mn.bottom_right(rect0) </span>
<span class="sd">        [4, 0]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_PhyToAbsGridConverter_bottom_right.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        객체의 물리 코너 좌표를 master 좌표계의 추상 좌표로 변환.</span>
<span class="sd">        파라미터</span>
<span class="sd">        obj(laygo2.physical): 물리좌표정보를 갖고있는 객체</span>
<span class="sd">        반환값</span>
<span class="sd">        numpy.ndarray: 추상 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;PhysicalObject&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">laygo2</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">PhysicalObject</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bottom_right</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">_i</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">_i</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span></div>

<div class="viewcode-block" id="_PhyToAbsGridConverter.top_left"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter.top_left">[docs]</a>    <span class="k">def</span> <span class="nf">top_left</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert an object&#39;s physical corner coordinates into abstract coordinates of the master grid.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        obj : laygo2.physical</span>
<span class="sd">            object having physical coordinate. </span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numy.ndarray</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x    = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 100], elements=[10, 20, 40, 50, 60]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y    = OneDimGrid(name=&#39;ygrid&#39;, scope=[0, 100], elements=[10, 20, 40, 50, 60]) </span>
<span class="sd">        &gt;&gt;&gt; g2      = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y) </span>
<span class="sd">        &gt;&gt;&gt; phy2abs = _PhyToAbsGridConverter(master=g2) </span>
<span class="sd">        &gt;&gt;&gt; rect0 = physical.Rect(xy=[[0, 0], [100, 100]], layer=[&#39;M1&#39;, &#39;drawing&#39;], netname=&#39;net0’) </span>
<span class="sd">        &gt;&gt;&gt; phy2abs.top_left(rect0) </span>
<span class="sd">        [0, 4]</span>
<span class="sd">        &gt;&gt;&gt; g2.mn.top_left(rect0) </span>
<span class="sd">        [0, 4]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_PhyToAbsGridConverter_top_left.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        객체의 물리 코너 좌표를 master 좌표계의 추상 좌표로 변환.</span>
<span class="sd">        파라미터</span>
<span class="sd">        obj(laygo2.physical): 물리좌표정보를 갖고있는 객체</span>
<span class="sd">        반환값</span>
<span class="sd">        numpy.ndarray: 추상 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;PhysicalObject&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">laygo2</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">PhysicalObject</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">top_left</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">_i</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">_i</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span></div>

<div class="viewcode-block" id="_PhyToAbsGridConverter.top_right"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter.top_right">[docs]</a>    <span class="k">def</span> <span class="nf">top_right</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert an object&#39;s physical corner coordinates into abstract coordinates of the master grid.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        obj : laygo2.physical</span>
<span class="sd">            object having physical coordinate. </span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numy.ndarray</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x    = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 100], elements=[10, 20, 40, 50, 60]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y    = OneDimGrid(name=&#39;ygrid&#39;, scope=[0, 100], elements=[10, 20, 40, 50, 60]) </span>
<span class="sd">        &gt;&gt;&gt; g2      = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y) </span>
<span class="sd">        &gt;&gt;&gt; phy2abs = _PhyToAbsGridConverter(master=g2) </span>
<span class="sd">        &gt;&gt;&gt; rect0 = physical.Rect(xy=[[0, 0], [100, 100]], layer=[&#39;M1&#39;, &#39;drawing&#39;], netname=&#39;net0’) </span>
<span class="sd">        &gt;&gt;&gt; phy2abs.top_right(rect0) </span>
<span class="sd">        [4, 4]</span>
<span class="sd">        &gt;&gt;&gt; g2.mn.top_right(rect0) </span>
<span class="sd">        [4, 4]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_PhyToAbsGridConverter_top_right.png</span>
<span class="sd">           :height: 250 </span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        객체의 물리 코너 좌표를 master 좌표계의 추상 좌표로 변환.</span>
<span class="sd">        파라미터</span>
<span class="sd">        obj(laygo2.physical): 물리좌표정보를 갖고있는 객체</span>
<span class="sd">        반환값</span>
<span class="sd">        numpy.ndarray: 추상 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;PhysicalObject&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">laygo2</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">PhysicalObject</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">top_right</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">_i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span></div>

<div class="viewcode-block" id="_PhyToAbsGridConverter.width"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter.width">[docs]</a>    <span class="k">def</span> <span class="nf">width</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the width of an object on this grid.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;PhysicalObject&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">laygo2</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">PhysicalObject</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_i</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">_i</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span></div>

<div class="viewcode-block" id="_PhyToAbsGridConverter.height"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter.height">[docs]</a>    <span class="k">def</span> <span class="nf">height</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the height of an object on this grid.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;PhysicalObject&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">laygo2</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">PhysicalObject</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_i</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">_i</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span></div>

<div class="viewcode-block" id="_PhyToAbsGridConverter.height_vec"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter.height_vec">[docs]</a>    <span class="k">def</span> <span class="nf">height_vec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;numpy.ndarray(dtype=int): Return np.array([0, height]).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">(</span><span class="n">obj</span><span class="p">)])</span></div>

<div class="viewcode-block" id="_PhyToAbsGridConverter.width_vec"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter.width_vec">[docs]</a>    <span class="k">def</span> <span class="nf">width_vec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;numpy.ndarray(dtype=int): Return np.array([width, 0]).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span> <span class="mi">0</span><span class="p">])</span></div>

<div class="viewcode-block" id="_PhyToAbsGridConverter.size"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter.size">[docs]</a>    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert an object&#39;s size ([width, height]) into abstract coordinates of the master grid.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        obj : laygo2.physical</span>
<span class="sd">            object having physical coordinate. </span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numy.ndarray</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x    = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 100], elements=[10, 20, 40, 50, 60]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y    = OneDimGrid(name=&#39;ygrid&#39;, scope=[0, 100], elements=[10, 20, 40, 50, 60]) </span>
<span class="sd">        &gt;&gt;&gt; g2      = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y) </span>
<span class="sd">        &gt;&gt;&gt; phy2abs = _PhyToAbsGridConverter(master=g2) </span>
<span class="sd">        &gt;&gt;&gt; rect0 = physical.Rect(xy=[[0, 0], [100, 100]], layer=[&#39;M1&#39;, &#39;drawing&#39;], netname=&#39;net0’) </span>
<span class="sd">        &gt;&gt;&gt; phy2abs.size(rect0) </span>
<span class="sd">        [4, 4]</span>
<span class="sd">        &gt;&gt;&gt; g2.mn.size(rect0) </span>
<span class="sd">        [4, 4]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_PhyToAbsGridConverter_size.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        객체의 크기([width, height])를 master 좌표계의 추상 좌표로 변환.</span>
<span class="sd">        파라미터</span>
<span class="sd">        obj(laygo2.physical): 물리좌표정보를 갖고있는 객체</span>
<span class="sd">        반환값</span>
<span class="sd">        numpy.ndarray: 추상 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">(</span><span class="n">obj</span><span class="p">)])</span></div>

<div class="viewcode-block" id="_PhyToAbsGridConverter.crossing"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter.crossing">[docs]</a>    <span class="k">def</span> <span class="nf">crossing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the physical intersections of objects into abstract coordinates of the master grid.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        args : laygo2.Physical</span>
<span class="sd">            physical object having bbox.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray(int, int)</span>
<span class="sd">            abstract points.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=‘xgrid&#39;, scope=[0, 10], elements=[0]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=‘ygrid’, scope=[0, 120], elements=[0, 20, 40, 80, 100, 120]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=“test”, vgrid = g1_x, hgrid = g1_y ) </span>
<span class="sd">        &gt;&gt;&gt; phy2abs = _PhyToAbsGridConverter(master=g2)</span>
<span class="sd">        &gt;&gt;&gt; rect0= physical.Rect(xy=[[0, 0], [60, 90]]) </span>
<span class="sd">        &gt;&gt;&gt; rect1= physical.Rect(xy=[[30, 30], [120, 120]]) </span>
<span class="sd">        &gt;&gt;&gt; phy2abs.crossing(rect0, rect1) </span>
<span class="sd">        [3, 2]</span>
<span class="sd">        &gt;&gt;&gt; g2.mn.crossing(rect0, rect1) </span>
<span class="sd">        [3, 2]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_PhyToAbsGridConverter_crossing.png</span>
<span class="sd">           :height: 250 </span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        객체들의 물리적 교차점을 master 좌표계의 추상 좌표로 변환.</span>
<span class="sd">        파라미터</span>
<span class="sd">        args(laygo2.Physical): bbox를 가지고있는 physical 객체</span>
<span class="sd">        반환값</span>
<span class="sd">        numpy.ndarray( int, int )): abstract points</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">overlap</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;point&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="_PhyToAbsGridConverter.overlap"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter.overlap">[docs]</a>    <span class="k">def</span> <span class="nf">overlap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;bbox&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the overlapping area of objects into abstract coordinates of the master grid and return in a format specified in type. </span>
<span class="sd">        A bounding box is returned if type=&#39;bbox&#39;, all coordinates in the overlapped region are returned in a two-dimensional array if type=&#39;array&#39;, and an one-dimensional list is returned if type=&#39;list&#39;. </span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        args : laygo2.Physical</span>
<span class="sd">            physical object having bbox.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            bbox abstract coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=‘xgrid&#39;, scope=[0, 10], elements=[0]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=‘ygrid’, scope=[0, 120], elements=[0, 20, 40, 80, 100, 120]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=“test”, vgrid = g1_x, hgrid = g1_y ) </span>
<span class="sd">        &gt;&gt;&gt; phy2abs = _PhyToAbsGridConverter(master=g2)</span>
<span class="sd">        &gt;&gt;&gt; rect0= physical.Rect(xy=[[0, 0], [60, 90]]) </span>
<span class="sd">        &gt;&gt;&gt; rect1= physical.Rect(xy=[[30, 30], [120, 120]]) </span>
<span class="sd">        &gt;&gt;&gt; phy2abs.overlap(rect0, rect1) </span>
<span class="sd">        [[3, 2], [6,4]]</span>
<span class="sd">        &gt;&gt;&gt; g2.mn.overlap(rect0, rect1) </span>
<span class="sd">        [[3, 2], [6,4]]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_PhyToAbsGridConverter_overlap.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        객체들의 겹치는 면적을 master 좌표계의 추상 좌표로 변환후 type에 따른 형태로 반환, &#39;bbox&#39;인 경우, bounding box로 반환, &#39;array&#39; 인경우 모든 교점을 2차원 array로 반환, &#39;list&#39; 인경우 모든 교점을 1차원 list로 변환.</span>
<span class="sd">        파라미터</span>
<span class="sd">        args(laygo2.Physical): bbox를 가지고있는 physical 객체</span>
<span class="sd">        반환값</span>
<span class="sd">        numpy.ndarray: bbox 추상좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_ib</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">_obj</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">_ib</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">_ib</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">(</span><span class="n">_obj</span><span class="p">)</span> <span class="c1">## shaped</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">(</span><span class="n">_obj</span><span class="p">)</span>
                <span class="n">_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">_b</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">_ib</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]]),</span> <span class="n">axis</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
                <span class="n">_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">_b</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">_ib</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]]),</span> <span class="n">axis</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
                <span class="n">_ib</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">_x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">_y</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="n">_x</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">_y</span><span class="p">[</span><span class="mi">2</span><span class="p">]]])</span>
        <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">&#39;bbox&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">_ib</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">&#39;point&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">_ib</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">&#39;list&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">_conv_bbox_to_list</span><span class="p">(</span><span class="n">_ib</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">&#39;array&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">_conv_bbox_to_array</span><span class="p">(</span><span class="n">_ib</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;overlap() should receive a valid value for its type (bbox, point, array, ...)&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="_PhyToAbsGridConverter.union"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter.union">[docs]</a>    <span class="k">def</span> <span class="nf">union</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the bounding box containing all objects into abstract coordinates of the master grid.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        args : laygo2.Physical</span>
<span class="sd">            physical object having bbox.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.ndarray</span>
<span class="sd">            bbox abstract coordinates.</span>

<span class="sd">        sGridConverter</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=‘xgrid&#39;, scope=[0, 10], elements=[0]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=‘ygrid’, scope=[0, 120], elements=[0, 20, 40, 80, 100, 120 ) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=“test”, vgrid = g1_x, hgrid = g1_y )</span>
<span class="sd">        &gt;&gt;&gt; rect0= physical.Rect(xy=[[0, 0], [60, 90]]) </span>
<span class="sd">        &gt;&gt;&gt; rect1= physical.Rect(xy=[[30, 30], [120, 120]]) </span>
<span class="sd">        &gt;&gt;&gt; g2.mn.union(rect0, rect1) </span>
<span class="sd">        [[0, 0], [12,7]]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_PhyToAbsGridConverter_union.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        객체들을 모두 포함하는 bounding box를 master 좌표계의 추상 좌표로 변환. </span>
<span class="sd">        파라미터</span>
<span class="sd">        args(laygo2.Physical): bbox를 가지고있는 physical 객체</span>
<span class="sd">        반환값</span>
<span class="sd">        numpy.ndarray: bbox 추상좌표</span>
<span class="sd">        참조</span>
<span class="sd">        _PhyToAbsGridConverter</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_ub</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">_obj</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">_ub</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">_ub</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">(</span><span class="n">_obj</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">(</span><span class="n">_obj</span><span class="p">)</span>
                <span class="n">_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">_b</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">_ub</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]]),</span> <span class="n">axis</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
                <span class="n">_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">_b</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">_ub</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]]),</span> <span class="n">axis</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
                <span class="n">_ub</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">_x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">_y</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">_x</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">_y</span><span class="p">[</span><span class="mi">3</span><span class="p">]]])</span>
        <span class="k">return</span> <span class="n">_ub</span></div>

<div class="viewcode-block" id="_PhyToAbsGridConverter.center"><a class="viewcode-back" href="../../../laygo2.object.grid._PhyToAbsGridConverter.html#laygo2.object.grid._PhyToAbsGridConverter.center">[docs]</a>    <span class="k">def</span> <span class="nf">center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert an object&#39;s physical center coordinates into abstract coordinates of the master grid.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        obj : laygo2.physical</span>
<span class="sd">            object having physical coordinate. </span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numy.ndarray</span>
<span class="sd">            abstract coordinates.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x    = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 100], elements=[10, 20, 40, 50, 60]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y    = OneDimGrid(name=&#39;ygrid&#39;, scope=[0, 100], elements=[10, 20, 40, 50, 60]) </span>
<span class="sd">        &gt;&gt;&gt; g2      = Grid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y) </span>
<span class="sd">        &gt;&gt;&gt; phy2abs = _PhyToAbsGridConverter(master=g2) </span>
<span class="sd">        &gt;&gt;&gt; rect0 = physical.Rect(xy=[[0, 0], [100, 100]], layer=[&#39;M1&#39;, &#39;drawing&#39;], netname=&#39;net0’) </span>
<span class="sd">        &gt;&gt;&gt; phy2abs.center(rect0) </span>
<span class="sd">        [3, 3]</span>
<span class="sd">        &gt;&gt;&gt; g2.mn.center(rect0) </span>
<span class="sd">        [3, 3]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_PhyToAbsGridConverter_center.png</span>
<span class="sd">           :height: 250 </span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        객체의 물리 중앙 좌표를 master 좌표계의 추상 좌표로 변환.</span>
<span class="sd">        파라미터</span>
<span class="sd">        obj(laygo2.physical): 물리좌표정보를 갖고있는 객체</span>
<span class="sd">        반환값</span>
<span class="sd">        numpy.ndarray: 추상 좌표</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mn0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">xy</span> <span class="o">&gt;=</span> <span class="n">obj</span><span class="o">.</span><span class="n">center</span>
        <span class="n">mn1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">xy</span> <span class="o">&lt;=</span> <span class="n">obj</span><span class="o">.</span><span class="n">center</span>

        <span class="n">point_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">xy</span><span class="p">[</span><span class="n">mn0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">xy</span><span class="p">[</span><span class="n">mn1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">xy</span><span class="p">[</span><span class="n">mn0</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mn1</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">xy</span><span class="p">[</span><span class="n">mn1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mn0</span><span class="p">[</span><span class="mi">1</span><span class="p">]]]</span> <span class="c1"># 4 physical points near the center coordinate.</span>
        <span class="n">dist_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">point_list</span><span class="p">:</span>
            <span class="n">dist_list</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">idx</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">point</span> <span class="o">-</span> <span class="n">obj</span><span class="o">.</span><span class="n">center</span><span class="p">)])</span> <span class="c1"># Calculate Euclidean distances.</span>
            <span class="n">idx</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">dist_sorted</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">dist_list</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">distance</span> <span class="p">:</span> <span class="n">distance</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="c1"># Sort distances in ascending order.</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">mn</span><span class="p">(</span><span class="n">point_list</span><span class="p">[</span><span class="n">dist_sorted</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]])</span> <span class="c1"># Convert the closest point to abstract coordinate and then return.</span></div></div>

<div class="viewcode-block" id="OneDimGrid"><a class="viewcode-back" href="../../../laygo2.object.grid.OneDimGrid.html#laygo2.object.grid.OneDimGrid">[docs]</a><span class="k">class</span> <span class="nc">OneDimGrid</span><span class="p">(</span><span class="n">CircularMapping</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class implementing one-dimensional abstract coordinates.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    1차원 추상좌표를 구현하는 클래스.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Member variables and properties</span>
    <span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;str: Coordinate system name.</span>

<span class="sd">    </span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 50]) </span>
<span class="sd">    &gt;&gt;&gt; g1_x.name</span>
<span class="sd">    “xgrid”</span>

<span class="sd">    .. image:: ../assets/img/object_grid_OneDimGrid_name.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    좌표계 이름.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">range</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;str: Region in which the coordinate system is defined Coordinates in the defined region are repeatedly expanded.</span>

<span class="sd">    </span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 50]) </span>
<span class="sd">    &gt;&gt;&gt; g1_x.range</span>
<span class="sd">    [0, 180]</span>
<span class="sd">    </span>
<span class="sd">    .. image:: ../assets/img/object_grid_OneDimGrid_range.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    좌표계가 정의된 영역. 정의된 영역의 좌표들이 반복되는 형태로 확장된다.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">phy2abs</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;self.phy2abs (laygo2._PhyToAbsGridConverter): Object that converts physical coordinates into abstract coordinates.</span>

<span class="sd">    </span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; g1_x  = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 50]) </span>
<span class="sd">    &gt;&gt;&gt; g1_x.phy2abs</span>
<span class="sd">    &lt;_PhyToAbsGridConverter object&gt;</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    물리 좌표에서 추상 좌표로 변환연산을 해주는 객체. </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">abs2phy</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;self.abs2phy (laygo2._AbsToPhyGridConverter): Object that converts abstract coordinates into physical coordinates.</span>

<span class="sd">    </span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 50]) </span>
<span class="sd">    &gt;&gt;&gt; g1_x.abs2phy</span>
<span class="sd">    &lt;_AbsToPhyGridConverter object&gt;</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    추상 좌표에서 물리 좌표로 변환연산을 해주는 객체. </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">width</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;int: The size of the region in which the coordinate system is defined.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 50]) </span>
<span class="sd">        &gt;&gt;&gt; g1_x.width</span>
<span class="sd">        180</span>

<span class="sd">        .. image:: ../assets/img/object_grid_OneDimGrid_width.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        좌표계가 정의된 영역의 크기. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="c1"># Constructor</span>
<div class="viewcode-block" id="OneDimGrid.__init__"><a class="viewcode-back" href="../../../laygo2.object.grid.OneDimGrid.html#laygo2.object.grid.OneDimGrid.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">elements</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">])):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor function of OneDimGrid class.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : str</span>
<span class="sd">        scope : numpy.ndarray</span>
<span class="sd">            scope of one-dimensional coordinate system </span>
<span class="sd">        elements: numpy.ndarray</span>
<span class="sd">            members of one-dimensional coordinate system</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        laygo2.OneDimGrid</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 50]) </span>
<span class="sd">        &gt;&gt;&gt; print(g1_x)</span>
<span class="sd">        OneDimGrid object name: xgrid, class: OneDimGrid, scope: [0, 180], elements: [0, 35, 85, 130  50]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_OneDimGrid_init.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        OneDimGrid 클래스의 생성자함수.</span>
<span class="sd">        파라미터</span>
<span class="sd">        name(str): 이름</span>
<span class="sd">        scope(numpy.ndarray): 1차원 좌표계의 범위</span>
<span class="sd">        elements(numpy.ndarray): 1차원 좌표계 의 구성원</span>
<span class="sd">        반환값</span>
<span class="sd">        laygo2.OneDimGrid</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">scope</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phy2abs</span> <span class="o">=</span> <span class="n">_PhyToAbsGridConverter</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abs2phy</span> <span class="o">=</span> <span class="n">_AbsToPhyGridConverter</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">CircularMapping</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elements</span><span class="o">=</span><span class="n">elements</span><span class="p">)</span></div>
        <span class="c1"># self.elements = np.asarray(elements)  # commented out because asarray does not woke well with Object arrays.</span>

    <span class="c1"># Indexing and slicing functions</span>
    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the physical coordinate corresponding to the abstract coordinate pos. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs2phy</span><span class="p">([</span><span class="n">pos</span><span class="p">])</span>

    <span class="c1"># Comparison operators</span>
    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the abstract grid coordinate that matches to other.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs2phy</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the abstract grid coordinate that is the largest but less than other.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs2phy</span><span class="o">.</span><span class="fm">__lt__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the index of the grid coordinate that is the largest but less than or equal to other.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs2phy</span><span class="o">.</span><span class="fm">__le__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the abstract grid coordinate that is the smallest but greater than other.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs2phy</span><span class="o">.</span><span class="fm">__gt__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the index of the grid coordinate that is the smallest but greater than or equal to other.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs2phy</span><span class="o">.</span><span class="fm">__ge__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="c1"># Informative functions</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the string representation of the object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">summarize</span><span class="p">()</span>

<div class="viewcode-block" id="OneDimGrid.summarize"><a class="viewcode-back" href="../../../laygo2.object.grid.OneDimGrid.html#laygo2.object.grid.OneDimGrid.summarize">[docs]</a>    <span class="k">def</span> <span class="nf">summarize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the summary of the object information.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> \
                                 <span class="s2">&quot;name: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> \
                                 <span class="s2">&quot;class: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> \
                                 <span class="s2">&quot;scope: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> \
                                 <span class="s2">&quot;elements: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="p">)</span></div>

    <span class="c1"># I/O functions</span>
<div class="viewcode-block" id="OneDimGrid.export_to_dict"><a class="viewcode-back" href="../../../laygo2.object.grid.OneDimGrid.html#laygo2.object.grid.OneDimGrid.export_to_dict">[docs]</a>    <span class="k">def</span> <span class="nf">export_to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return dict object containing grid information.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        dict</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 180], elements=[0, 35, 85, 130, 50]) </span>
<span class="sd">        &gt;&gt;&gt; g1_x.export_to_dict()</span>
<span class="sd">        {&#39;scope&#39;: [0, 180], &#39;elements&#39;: [0, 35, 85, 130, 50]}</span>

<span class="sd">        .. image:: ../assets/img/object_grid_OneDimGrid_export_to_dict.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        그리드의 정보를 담은 dict객체 반환.</span>
<span class="sd">        파라미터</span>
<span class="sd">        없음</span>
<span class="sd">        반환값</span>
<span class="sd">        dict</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">export_dict</span> <span class="o">=</span> <span class="p">{</span>
                       <span class="s1">&#39;scope&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
                       <span class="s1">&#39;elements&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
                       <span class="p">}</span>
        <span class="k">return</span> <span class="n">export_dict</span></div></div>


<div class="viewcode-block" id="Grid"><a class="viewcode-back" href="../../../laygo2.object.grid.Grid.html#laygo2.object.grid.Grid">[docs]</a><span class="k">class</span> <span class="nc">Grid</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A base class having conversion operators and the mapping information (element) between two-dimensional physical coordinates and abstract coordinates.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    2차원 물리좌표와 추상좌표간 mapping 정보(element) 를 갖고 있으며 해당 element를 활용하는 좌표 연산자를 가지고 있는 기본 클래스.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;str: the name of the grid.&quot;&quot;&quot;</span>

    <span class="n">_xy</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;List[OneDimGrid]: the list contains the 1d-grid objects for x and y axes.&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">elements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;numpy.ndarray: Two-dimensional element of a coordinate system.</span>
<span class="sd">            x elements, y elements</span>
<span class="sd">    </span>
<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; glib      = tech.load_grids(template) </span>
<span class="sd">        &gt;&gt;&gt; g_cmos_m2 = glib[ “cmos_m2” ] </span>
<span class="sd">        &gt;&gt;&gt; g_cmos_m2.elements </span>
<span class="sd">        [ array([0]), array( [0, 35, 85, 130] ) ]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_Grid_Elements.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        좌표계 2차원 element.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">elements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">elements</span><span class="p">]</span>
    

    <span class="n">phy2abs</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;PhyToAbsGridConverter(master=self)&quot;&quot;&quot;</span>

    <span class="n">abs2phy</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;AbsToPhyGridConverter(master=self)&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">xy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;self.abs2phy (laygo2._AbsToPhyGridConverter): Two-dimensional _AbsToPhyConverter of a coordinate system.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=‘xgrid&#39;, scope=[0, 100], elements=[0, 10, 20, 40, 50 ]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=‘ygrid’, scope=[0, 100], elements=[10, 20, 40, 50, 60 ]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=“test”, vgrid = g1_x, hgrid = g1_y ) </span>
<span class="sd">        &gt;&gt;&gt; g2.xy[10,10] </span>
<span class="sd">        [200 210] </span>
<span class="sd">        &gt;&gt;&gt; g2.xy([10, 10]) </span>
<span class="sd">        [200 210] </span>
<span class="sd">        &gt;&gt;&gt; g2.xy &lt; [10,10] </span>
<span class="sd">        [0,-1] </span>
<span class="sd">        &gt;&gt;&gt; g2.xy &lt;= [10,10] </span>
<span class="sd">        [1,0] </span>
<span class="sd">        &gt;&gt;&gt; g2.xy &gt; [10,10] </span>
<span class="sd">        [2,1]</span>
<span class="sd">        &gt;&gt;&gt; g2.xy &gt;= [10,10] </span>
<span class="sd">        [1,0]</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        좌표계 2차원 _AbsToPhyConverter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs2phy</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;self._xy[0].abs2phy (laygo2._AbsToPhyGridConverter): One-dimensional _AbsToPhyGridConverter of the x-coordinate system.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=‘xgrid&#39;, scope=[0, 100], elements=[0, 10, 20, 40, 50 ]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=‘ygrid’, scope=[0, 100], elements=[10, 20, 40, 50, 60 ]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=“test”, vgrid = g1_x, hgrid = g1_y )</span>
<span class="sd">        &gt;&gt;&gt; g2.x[10] </span>
<span class="sd">        200 </span>
<span class="sd">        &gt;&gt;&gt; g2.x &lt;  10 </span>
<span class="sd">        [0] </span>
<span class="sd">        &gt;&gt;&gt; g2.x &lt;= 10 </span>
<span class="sd">        [1] </span>
<span class="sd">        &gt;&gt;&gt; g2.x &gt;  10 </span>
<span class="sd">        [2] </span>
<span class="sd">        &gt;&gt;&gt; g2.x &gt;= 10 </span>
<span class="sd">        [1]</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        x좌표계 1차원 _AbsToPhyGridConverter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">abs2phy</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;self._xy[1].abs2phy (laygo2._AbsToPhyGridConverter): One-dimensional _AbsToPhyGridConverter of the y-coordinate system.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=‘xgrid&#39;, scope=[0, 100], elements=[0, 10, 20, 40, 50 ]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=‘ygrid’, scope=[0, 100], elements=[10, 20, 40, 50, 60 ]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=“test”, vgrid = g1_x, hgrid = g1_y )</span>
<span class="sd">        &gt;&gt;&gt; g2.y[10] </span>
<span class="sd">        210 </span>
<span class="sd">        &gt;&gt;&gt; g2.y &lt;  10 </span>
<span class="sd">        [-1] </span>
<span class="sd">        &gt;&gt;&gt; g2.y &lt;= 10 </span>
<span class="sd">        [0] </span>
<span class="sd">        &gt;&gt;&gt; g2.y &gt;  10 </span>
<span class="sd">        [1] </span>
<span class="sd">        &gt;&gt;&gt; g2.y &gt;= 10 </span>
<span class="sd">        [0]</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        y좌표계 1차원 _AbsToPhyGridConverter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">abs2phy</span>
    

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">v</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;self.x (laygo2.OneDimGrid): OneDimGrid of the x-coordinate system.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=‘xgrid&#39;, scope=[0, 100], elements=[0, 10, 20, 40, 50 ]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=‘ygrid’, scope=[0, 100], elements=[10, 20, 40, 50, 60 ]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=“test”, vgrid = g1_x, hgrid = g1_y )</span>
<span class="sd">        &gt;&gt;&gt; g2.v </span>
<span class="sd">        g1_x</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        x좌표계 OneDimGrid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">h</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;self.y (laygo2.OneDimGrid): OneDimGrid of the y-coordinate system.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=‘xgrid&#39;, scope=[0, 100], elements=[0, 10, 20, 40, 50 ]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=‘ygrid’, scope=[0, 100], elements=[10, 20, 40, 50, 60 ]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=“test”, vgrid = g1_x, hgrid = g1_y )</span>
<span class="sd">        &gt;&gt;&gt; g2.h </span>
<span class="sd">        g1_y</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        y좌표계 OneDimGrid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">mn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;self._phy2abs (laygo2._PhyToAbsGridConverter): Two-dimensional _PhyToAbsConverter of a coordinate system.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=‘xgrid&#39;, scope=[0, 100], elements=[0, 10, 20, 40, 50 ]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=‘ygrid’, scope=[0, 100], elements=[10, 20, 40, 50, 60 ]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=“test”, vgrid = g1_x, hgrid = g1_y )</span>
<span class="sd">        &gt;&gt;&gt; g2.mn[40,40] </span>
<span class="sd">        [3, 2] </span>
<span class="sd">        &gt;&gt;&gt; g2.mn([40, 40]) </span>
<span class="sd">        [3, 2] </span>
<span class="sd">        &gt;&gt;&gt; g2.mn &lt;  [40,40] </span>
<span class="sd">        [750, 760] </span>
<span class="sd">        &gt;&gt;&gt; g2.mn &lt;= [40,40] </span>
<span class="sd">        [800, 810] </span>
<span class="sd">        &gt;&gt;&gt; g2.mn &gt;  [40,40] </span>
<span class="sd">        [810, 820] </span>
<span class="sd">        &gt;&gt;&gt; g2.mn &gt;= [40,40] </span>
<span class="sd">        [800, 810]</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        좌표계 2차원 _PhyToAbsConverter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">phy2abs</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">m</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;self._xy[0].phy2abs (laygo2._PhyToAbsGridConverter ): One-dimensional _PhyToAbsConverter of the x-coordinate system.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=‘xgrid&#39;, scope=[0, 100], elements=[0, 10, 20, 40, 50 ])</span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=‘ygrid’, scope=[0, 100], elements=[10, 20, 40, 50, 60 ]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=“test”, vgrid = g1_x, hgrid = g1_y )</span>
<span class="sd">        &gt;&gt;&gt; g2.n[40] </span>
<span class="sd">        2 </span>
<span class="sd">        &gt;&gt;&gt; g2.n(40) </span>
<span class="sd">        2 </span>
<span class="sd">        &gt;&gt;&gt; g2.n &lt;  40 </span>
<span class="sd">        760 </span>
<span class="sd">        &gt;&gt;&gt; g2.n &lt;= 40 </span>
<span class="sd">        810 </span>
<span class="sd">        &gt;&gt;&gt; g2.n &gt;  40 </span>
<span class="sd">        820 </span>
<span class="sd">        &gt;&gt;&gt; g2.n &gt;= 40 </span>
<span class="sd">        810</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        x좌표계 1차원 _PhyToAbsConverter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">phy2abs</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">n</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;self._xy[1].phy2abs (laygo2._PhyToAbsGridConverter ): One-dimensional _PhyToAbsConverter of the y-coordinate system.</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=‘xgrid&#39;, scope=[0, 100], elements=[0, 10, 20, 40, 50 ]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=‘ygrid’, scope=[0, 100], elements=[10, 20, 40, 50, 60 ]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=“test”, vgrid = g1_x, hgrid = g1_y )</span>
<span class="sd">        &gt;&gt;&gt; g2.n[40] </span>
<span class="sd">        2 </span>
<span class="sd">        &gt;&gt;&gt; g2.n(40) </span>
<span class="sd">        2 </span>
<span class="sd">        &gt;&gt;&gt; g2.n &lt;  40 </span>
<span class="sd">        760 </span>
<span class="sd">        &gt;&gt;&gt; g2.n &lt;= 40 </span>
<span class="sd">        810 </span>
<span class="sd">        &gt;&gt;&gt; g2.n &gt;  40 </span>
<span class="sd">        820 </span>
<span class="sd">        &gt;&gt;&gt; g2.n &gt;= 40 </span>
<span class="sd">        810</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        y좌표계 1차원 _PhyToAbsConverter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">phy2abs</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">shape</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;numpy.ndarray: Two-dimensional element length in a coordinate system.</span>
<span class="sd">            length of x-axis elements, length of y-axis elements</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=‘xgrid&#39;, scope=[0, 100], elements=[0, 10, 20, 40, 50 ]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=‘ygrid’, scope=[0, 100], elements=[10, 20, 40, 50, 60 ]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=“test”, vgrid = g1_x, hgrid = g1_y )</span>
<span class="sd">        &gt;&gt;&gt; g2.shape </span>
<span class="sd">        [5, 5]</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        좌표게 2차원 element의 길이.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">])</span>

<div class="viewcode-block" id="Grid.get_range"><a class="viewcode-back" href="../../../laygo2.object.grid.Grid.html#laygo2.object.grid.Grid.get_range">[docs]</a>    <span class="k">def</span> <span class="nf">get_range</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">range</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">range</span><span class="p">)))</span></div>

<div class="viewcode-block" id="Grid.set_range"><a class="viewcode-back" href="../../../laygo2.object.grid.Grid.html#laygo2.object.grid.Grid.set_range">[docs]</a>    <span class="k">def</span> <span class="nf">set_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">range</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">value</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">range</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">value</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span></div>

    <span class="nb">range</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_range</span><span class="p">,</span> <span class="n">set_range</span><span class="p">)</span>
    <span class="sd">&quot;&quot;&quot;numpy.ndarray: Region in which the coordinate system is defined.</span>
<span class="sd">        bbox of the respective Grid</span>

<span class="sd">    </span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; g1_x = OneDimGrid(name=‘xgrid&#39;, scope=[0, 100], elements=[0, 10, 20, 40, 50 ]) </span>
<span class="sd">    &gt;&gt;&gt; g1_y = OneDimGrid(name=‘ygrid’, scope=[0, 100], elements=[10, 20, 40, 50, 60 ]) </span>
<span class="sd">    &gt;&gt;&gt; g2   = Grid(name=“test”, vgrid = g1_x, hgrid = g1_y )</span>
<span class="sd">    &gt;&gt;&gt; g2.range </span>
<span class="sd">    [ [0, 0], [100, 100 ]]</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    좌표계가 정의된 영역.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">width</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;numpy.int32: Width of the region in which the coordinate system is defined.</span>
<span class="sd">            x scope</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=‘xgrid&#39;, scope=[0, 100], elements=[0, 10, 20, 40, 50 ]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=‘ygrid’, scope=[0, 100], elements=[10, 20, 40, 50, 60 ]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=“test”, vgrid = g1_x, hgrid = g1_y )</span>
<span class="sd">        &gt;&gt;&gt; g2.width </span>
<span class="sd">        100</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        좌표계가 정의된 영역의 폭. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">width</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;numpy.int32: Height of the region in which the coordinate system is defined.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=‘xgrid&#39;, scope=[0, 100], elements=[0, 10, 20, 40, 50 ]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=‘ygrid’, scope=[0, 100], elements=[10, 20, 40, 50, 60 ]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=“test”, vgrid = g1_x, hgrid = g1_y )</span>
<span class="sd">        &gt;&gt;&gt; g2.height </span>
<span class="sd">        100</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        좌표계가 정의된 영역의 높이. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">width</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">height_vec</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;numpy.ndarray: Return the height vector [0, h].</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=‘xgrid&#39;, scope=[0, 100], elements=[0, 10, 20, 40, 50 ]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=‘ygrid’, scope=[0, 100], elements=[10, 20, 40, 50, 60 ]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=“test”, vgrid = g1_x, hgrid = g1_y )</span>
<span class="sd">        &gt;&gt;&gt; g2.height_vec </span>
<span class="sd">        [0, 100]</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        height를 list로 반환.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">])</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">width_vec</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;numpy.ndarray: Return width as a list.</span>
<span class="sd">            length of the respective axis and zero</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=‘xgrid&#39;, scope=[0, 100], elements=[0, 10, 20, 40, 50 ]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=‘ygrid’, scope=[0, 100], elements=[10, 20, 40, 50, 60 ]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=“test”, vgrid = g1_x, hgrid = g1_y )</span>
<span class="sd">        &gt;&gt;&gt; g2.width_vec </span>
<span class="sd">        [100, 0]</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        width를 list로 반환.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

<div class="viewcode-block" id="Grid.__init__"><a class="viewcode-back" href="../../../laygo2.object.grid.Grid.html#laygo2.object.grid.Grid.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">vgrid</span><span class="p">,</span> <span class="n">hgrid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor function of Grid class.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : str</span>
<span class="sd">        vgrid : laygo2.object.grid.OndDimGrid</span>
<span class="sd">            OneDimGrid object of the x-coordinate system</span>
<span class="sd">        hgrid : laygo2.object.grid.OndDimGrid</span>
<span class="sd">            OneDimGrid object of the y-coordinate system</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        laygo2.Grid</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=‘xgrid&#39;, scope=[0, 100], elements=[0, 10, 20, 40, 50 ]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=‘ygrid’, scope=[0, 100], elements=[10, 20, 40, 50, 60 ]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=“test”, vgrid = g1_x, hgrid = g1_y )</span>
<span class="sd">        &gt;&gt;&gt; print(g2) </span>
<span class="sd">        &lt;laygo2.object.grid.Grid object&gt; name: test, class: Grid, scope: [[0, 0], [100, 100]], elements: [array([ 0, 10, 20, 40, 50]), array([10, 20, 40, 50, 60])</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        Grid 클래스의 생성자함수.</span>
<span class="sd">        파라미터</span>
<span class="sd">        name(str): 이름</span>
<span class="sd">        vgrid(laygo2.OneDimGrid): x좌표계 OneDimGrid 객체</span>
<span class="sd">        hgrid(laygo2.OneDimGrid): y좌표계 OneDimGrid 객체</span>
<span class="sd">        반환값</span>
<span class="sd">        laygo2.Grid</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span> <span class="o">=</span> <span class="p">[</span><span class="n">vgrid</span><span class="p">,</span> <span class="n">hgrid</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phy2abs</span> <span class="o">=</span> <span class="n">_PhyToAbsGridConverter</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abs2phy</span> <span class="o">=</span> <span class="n">_AbsToPhyGridConverter</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">elements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;list: return elements of subgrids ([_xy[0].elements, _xy[1].elements]). &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">elements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">elements</span><span class="p">]</span>

    <span class="c1"># Indexing and slicing functions</span>
    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs2phy</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>

    <span class="c1"># Comparison operators</span>
    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the physical grid coordinate that matches to other.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs2phy</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the index of the grid coordinate that is the largest but less than other.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs2phy</span><span class="o">.</span><span class="fm">__lt__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the index of the grid coordinate that is the largest but less than or equal to other.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs2phy</span><span class="o">.</span><span class="fm">__le__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the index of the grid coordinate that is the smallest but greater than other.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs2phy</span><span class="o">.</span><span class="fm">__gt__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the index of the grid coordinate that is the smallest but greater than or equal to other.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs2phy</span><span class="o">.</span><span class="fm">__ge__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

<div class="viewcode-block" id="Grid.bbox"><a class="viewcode-back" href="../../../laygo2.object.grid.Grid.html#laygo2.object.grid.Grid.bbox">[docs]</a>    <span class="k">def</span> <span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the abstract grid coordinates corresponding to the &#39;internal&#39; bounding box of obj.</span>
<span class="sd">        See _PhyToAbsGridConverter.bbox() for details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">phy2abs</span><span class="o">.</span><span class="n">bbox</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></div>

<div class="viewcode-block" id="Grid.bottom_left"><a class="viewcode-back" href="../../../laygo2.object.grid.Grid.html#laygo2.object.grid.Grid.bottom_left">[docs]</a>    <span class="k">def</span> <span class="nf">bottom_left</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the abstract grid coordinates corresponding to the bottom-left corner of obj.</span>
<span class="sd">        See _PhyToAbsGridConverter.bottom_left() for details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">phy2abs</span><span class="o">.</span><span class="n">bottom_left</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></div>

<div class="viewcode-block" id="Grid.bottom_right"><a class="viewcode-back" href="../../../laygo2.object.grid.Grid.html#laygo2.object.grid.Grid.bottom_right">[docs]</a>    <span class="k">def</span> <span class="nf">bottom_right</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the abstract grid coordinates corresponding to the bottom-right corner of obj.</span>
<span class="sd">        See _PhyToAbsGridConverter.bottom_right() for details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">phy2abs</span><span class="o">.</span><span class="n">bottom_right</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></div>

<div class="viewcode-block" id="Grid.top_left"><a class="viewcode-back" href="../../../laygo2.object.grid.Grid.html#laygo2.object.grid.Grid.top_left">[docs]</a>    <span class="k">def</span> <span class="nf">top_left</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the abstract grid coordinates corresponding to the top-left corner of obj.</span>
<span class="sd">        See _PhyToAbsGridConverter.top_left() for details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">phy2abs</span><span class="o">.</span><span class="n">top_left</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></div>

<div class="viewcode-block" id="Grid.top_right"><a class="viewcode-back" href="../../../laygo2.object.grid.Grid.html#laygo2.object.grid.Grid.top_right">[docs]</a>    <span class="k">def</span> <span class="nf">top_right</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the abstract grid coordinates corresponding to the top-right corner of obj.</span>
<span class="sd">        See _PhyToAbsGridConverter.top_right() for details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">phy2abs</span><span class="o">.</span><span class="n">top_right</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></div>

<div class="viewcode-block" id="Grid.crossing"><a class="viewcode-back" href="../../../laygo2.object.grid.Grid.html#laygo2.object.grid.Grid.crossing">[docs]</a>    <span class="k">def</span> <span class="nf">crossing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the abstract grid coordinates corresponding to the crossing point of args.</span>
<span class="sd">        See _PhyToAbsGridConverter.crossing() for details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">phy2abs</span><span class="o">.</span><span class="n">crossing</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="Grid.overlap"><a class="viewcode-back" href="../../../laygo2.object.grid.Grid.html#laygo2.object.grid.Grid.overlap">[docs]</a>    <span class="k">def</span> <span class="nf">overlap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;bbox&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the abstract grid coordinates corresponding to the overlap of args.</span>
<span class="sd">        See _PhyToAbsGridConverter.overlap() for details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">phy2abs</span><span class="o">.</span><span class="n">overlap</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">)</span></div>

<div class="viewcode-block" id="Grid.union"><a class="viewcode-back" href="../../../laygo2.object.grid.Grid.html#laygo2.object.grid.Grid.union">[docs]</a>    <span class="k">def</span> <span class="nf">union</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the abstract grid coordinates corresponding to union of args.</span>
<span class="sd">        See _PhyToAbsGridConverter.union() for details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">phy2abs</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="Grid.center"><a class="viewcode-back" href="../../../laygo2.object.grid.Grid.html#laygo2.object.grid.Grid.center">[docs]</a>    <span class="k">def</span> <span class="nf">center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the abstrack grid coordinates corresponding to the center point of obj.</span>
<span class="sd">        See _PhyToAbsGridConverter.center for details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">phy2abs</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></div>

    <span class="c1"># Iterators</span>
    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># TODO: fix this to iterate over the full coordinates</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="fm">__iter__</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="fm">__iter__</span><span class="p">()])</span>

    <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># TODO: fix this to iterate over the full coordinates</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="fm">__next__</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="fm">__next__</span><span class="p">()])</span>

    <span class="c1"># Informative functions</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the string representation of the object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">summarize</span><span class="p">()</span>

<div class="viewcode-block" id="Grid.summarize"><a class="viewcode-back" href="../../../laygo2.object.grid.Grid.html#laygo2.object.grid.Grid.summarize">[docs]</a>    <span class="k">def</span> <span class="nf">summarize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Output the information of the respective grid.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = OneDimGrid(name=‘xgrid&#39;, scope=[0, 100], elements=[0, 10, 20, 40, 50 ]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = OneDimGrid(name=‘ygrid’, scope=[0, 100], elements=[10, 20, 40, 50, 60 ]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = Grid(name=“test”, vgrid = g1_x, hgrid = g1_y )</span>
<span class="sd">        &gt;&gt;&gt; g2.summarize() </span>
<span class="sd">        &lt;laygo2.object.grid.Grid object&gt; name: test, class: Grid, scope: [[0, 0], [100, 100]], elements: [array([ 0, 10, 20, 40, 50]), array([10, 20, 40, 50, 60])</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        해당 Grid의 정보 출력.</span>
<span class="sd">        파라미터</span>
<span class="sd">        없음</span>
<span class="sd">        반환값</span>
<span class="sd">        str</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> \
                                 <span class="s2">&quot;name: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> \
               <span class="s2">&quot;class: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> \
               <span class="s2">&quot;scope: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> \
               <span class="s2">&quot;elements: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="p">)</span></div></div>


<span class="c1"># Regular classes.</span>
<div class="viewcode-block" id="PlacementGrid"><a class="viewcode-back" href="../../../laygo2.object.grid.PlacementGrid.html#laygo2.object.grid.PlacementGrid">[docs]</a><span class="k">class</span> <span class="nc">PlacementGrid</span><span class="p">(</span><span class="n">Grid</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    PlacementGrid class implements a grid for placement of Instance and VirtualInstance.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    PlacementGrid 클래스는 Instance 및 VirtualInstance 개체들의 배치를 위한 격자 그리드를 구현한다.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;placement&#39;</span>

<div class="viewcode-block" id="PlacementGrid.place"><a class="viewcode-back" href="../../../laygo2.object.grid.PlacementGrid.html#laygo2.object.grid.PlacementGrid.place">[docs]</a>    <span class="k">def</span> <span class="nf">place</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inst</span><span class="p">,</span> <span class="n">mn</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Maps abstract coordinates with instance xy attribute.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        inst : laygo2.physical.instance</span>
<span class="sd">            instance to be placed</span>
<span class="sd">        mn : numpy.ndarray or list</span>
<span class="sd">            abstract coordinates to place instance</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        laygo2.physical.instance : instance with revised coordinates</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; g1_x = laygo2.object.grid.OneDimGrid(name=&#39;xgrid&#39;, scope=[0, 20], elements=[0]) </span>
<span class="sd">        &gt;&gt;&gt; g1_y = laygo2.object.grid.OneDimGrid(name=&#39;ygrid&#39;, scope=[0, 100], elements=[0]) </span>
<span class="sd">        &gt;&gt;&gt; g2   = laygo2.object.grid.PlacementGrid(name=&#39;test&#39;, vgrid=g1_x, hgrid=g1_y) </span>
<span class="sd">        &gt;&gt;&gt; inst0= laygo2.object.physical.Instance(name=&quot;I0&quot;, xy=[100, 100], transform=‘R0’……)</span>
<span class="sd">        &gt;&gt;&gt; print(inst0.xy) </span>
<span class="sd">        [100, 100]</span>
<span class="sd">        &gt;&gt;&gt; g2.place(inst=inst0, mn=[10,10]) </span>
<span class="sd">        &gt;&gt;&gt; print(inst0.xy) </span>
<span class="sd">        [200, 1000]</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        인스턴스 xy속성에 추상좌표를 매핑함.</span>
<span class="sd">        파라미터</span>
<span class="sd">        inst(laygo2.physical.instance): 배치할 인스턴스</span>
<span class="sd">        mn(numpy.ndarray or list): 인스턴스를 배치할 추상좌표</span>
<span class="sd">        반환값</span>
<span class="sd">        laygo2.physical.instance: 좌표가 수정된 인스턴스</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">inst</span><span class="o">.</span><span class="n">xy</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="n">mn</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">inst</span></div></div>


<div class="viewcode-block" id="RoutingGrid"><a class="viewcode-back" href="../../../laygo2.object.grid.RoutingGrid.html#laygo2.object.grid.RoutingGrid">[docs]</a><span class="k">class</span> <span class="nc">RoutingGrid</span><span class="p">(</span><span class="n">Grid</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class that implements wire connections in an abstract coordinate system.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    추상 좌표계 상의 배선 동작을 구현하는 클래스.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;routing&#39;</span>

    <span class="n">vwidth</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;CircularMapping: Width of vertical wires.</span>

<span class="sd">    </span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; templates = tech.load_templates() </span>
<span class="sd">    &gt;&gt;&gt; grids = tech.load_grids(templates=templates) </span>
<span class="sd">    &gt;&gt;&gt; r23   = grids[&#39;routing_23_cmos’] </span>
<span class="sd">    &gt;&gt;&gt; print(r23.vwitdh) </span>
<span class="sd">    &lt;laygo2.object.grid.CircularMapping object &gt; class: CircularMapping, elements: [10]</span>

<span class="sd">    .. image:: ../assets/img/object_grid_RoutingGrid_vwidth.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    수직 wire 들의 폭.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">hwidth</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;CircularMapping: Width of horizontal wires.</span>

<span class="sd">    </span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; templates = tech.load_templates() </span>
<span class="sd">    &gt;&gt;&gt; grids = tech.load_grids(templates=templates) </span>
<span class="sd">    &gt;&gt;&gt; r23   = grids[&#39;routing_23_cmos’]</span>
<span class="sd">    &gt;&gt;&gt; print(r23.hwitdh) </span>
<span class="sd">    &lt;laygo2.object.grid.CircularMapping object&gt; class: CircularMapping, elements: [10 10 10 10 10 10 10 10]</span>

<span class="sd">    .. image:: ../assets/img/object_grid_RoutingGrid_hwidth.png</span>
<span class="sd">           :height: 250 </span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    수평 wire들의 폭.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">vextension</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;CircularMapping: Extension of vertical wires.</span>

<span class="sd">    </span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; templates = tech.load_templates() </span>
<span class="sd">    &gt;&gt;&gt; grids = tech.load_grids(templates=templates) </span>
<span class="sd">    &gt;&gt;&gt; r23   = grids[&#39;routing_23_cmos’] </span>
<span class="sd">    &gt;&gt;&gt; print(r23.vextension) </span>
<span class="sd">    &lt;laygo2.object.grid.CircularMapping object&gt; class: CircularMapping, elements: [15]</span>

<span class="sd">    .. image:: ../assets/img/object_grid_RoutingGrid_vextension.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    수직 wire들의 extension.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">hextension</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;CircularMapping: Extension of horizontal wires.</span>

<span class="sd">    </span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; templates = tech.load_templates() </span>
<span class="sd">    &gt;&gt;&gt; grids = tech.load_grids(templates=templates) </span>
<span class="sd">    &gt;&gt;&gt; r23   = grids[&#39;routing_23_cmos’] </span>
<span class="sd">    &gt;&gt;&gt; print(r23.hextension) </span>
<span class="sd">    &lt;laygo2.object.grid.CircularMapping object&gt; class: CircularMapping, elements: [15 15 15 15 15 15 15 15]</span>

<span class="sd">    .. image:: ../assets/img/object_grid_RoutingGrid_hextension.png</span>
<span class="sd">           :height: 250 </span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    수평 wire들의 extension.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">vextension0</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;CircularMapping: the array containing the extension of the zero-length wires on the vertical grid.&quot;&quot;&quot;</span>
    <span class="n">hextension0</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;CircularMapping: the array containing the extension of the zero-length wires on the horizontal grid. &quot;&quot;&quot;</span>
    <span class="n">vlayer</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;CircularMapping: Layer information of vertical wires.</span>

<span class="sd">    </span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; templates = tech.load_templates() </span>
<span class="sd">    &gt;&gt;&gt; grids = tech.load_grids(templates=templates) </span>
<span class="sd">    &gt;&gt;&gt; r23   = grids[&#39;routing_23_cmos’] </span>
<span class="sd">    &gt;&gt;&gt; print(r23.vlayer) </span>
<span class="sd">    &lt;laygo2.object.grid.CircularMapping object&gt; class: CircularMapping, elements: [[&#39;metal3&#39; &#39;drawing&#39;]]</span>

<span class="sd">    .. image:: ../assets/img/object_grid_RoutingGrid_vlayer.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    수직 wire들의 레이어 정보.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">hlayer</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;CircularMapping: Layer information of horizontal wires.</span>

<span class="sd">    </span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; templates = tech.load_templates() </span>
<span class="sd">    &gt;&gt;&gt; grids = tech.load_grids(templates=templates) </span>
<span class="sd">    &gt;&gt;&gt; r23   = grids[&#39;routing_23_cmos’]</span>
<span class="sd">    &gt;&gt;&gt; print(r23.hlayer) </span>
<span class="sd">    &lt;laygo2.object.grid.CircularMapping object&gt; class: CircularMapping, elements: [[&#39;metal2&#39; &#39;drawing&#39;], [&#39;metal2&#39; &#39;drawing&#39;], [&#39;metal2&#39; &#39;drawing&#39;], [&#39;metal2&#39; &#39;drawing&#39;], [&#39;metal2&#39; &#39;drawing&#39;], [&#39;metal2&#39; &#39;drawing&#39;], [&#39;metal2&#39; &#39;drawing&#39;], [&#39;metal2&#39; &#39;drawing&#39;]]</span>

<span class="sd">    .. image:: ../assets/img/object_grid_RoutingGrid_hlayer.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    수평 wire들의 레이어정보.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pin_vlayer</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;CircularMapping: Layer information of vertical pin wires.</span>

<span class="sd">    </span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; templates = tech.load_templates() </span>
<span class="sd">    &gt;&gt;&gt; grids = tech.load_grids(templates=templates) </span>
<span class="sd">    &gt;&gt;&gt; r23   = grids[&#39;routing_23_cmos’]</span>
<span class="sd">    &gt;&gt;&gt; print(r23.pin_vlayer) </span>
<span class="sd">    &lt;laygo2.object.grid.CircularMapping object&gt; class: CircularMapping, elements: [[&#39;metal3&#39; &#39;pin&#39;]]</span>

<span class="sd">    .. image:: ../assets/img/object_grid_RoutingGrid_pin_vlayer.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    수직 pin wire들의 레이어 정보.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pin_hlayer</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;CircularMapping: Layer information of horizontal pine wires.</span>

<span class="sd">    </span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; templates = tech.load_templates() </span>
<span class="sd">    &gt;&gt;&gt; grids = tech.load_grids(templates=templates) </span>
<span class="sd">    &gt;&gt;&gt; r23   = grids[&#39;routing_23_cmos’] </span>
<span class="sd">    &gt;&gt;&gt; print(r23.pin_hlayer) </span>
<span class="sd">    &lt;laygo2.object.grid.CircularMapping object&gt; class: CircularMapping, elements: [[&#39;metal2&#39; &#39;pin&#39;], [&#39;metal2&#39; &#39;pin&#39;], [&#39;metal2&#39; &#39;pin&#39;], [&#39;metal2&#39; &#39;pin&#39;], [&#39;metal2&#39; &#39;pin&#39;], [&#39;metal2&#39; &#39;pin&#39;], [&#39;metal2&#39; &#39;pin&#39;], [&#39;metal2&#39; &#39;pin&#39;]]</span>

<span class="sd">    .. image:: ../assets/img/object_grid_RoutingGrid_pin_hlayer.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    수평 pin wire 들의 레이어정보.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">viamap</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;CircularMappingArray: Array containing Via objects positioned on grid crossing points.</span>

<span class="sd">    </span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; templates = tech.load_templates() </span>
<span class="sd">    &gt;&gt;&gt; grids = tech.load_grids(templates=templates) </span>
<span class="sd">    &gt;&gt;&gt; r23   = grids[&#39;routing_23_cmos’]</span>
<span class="sd">    &gt;&gt;&gt; print(r23.viamap) </span>
<span class="sd">    &lt;laygo2.object.grid.CircularMappingArray object&gt; class: CircularMappingArray, elements: [[&lt;laygo2.object.template.UserDefinedTemplate object&gt;, &lt;laygo2.object.template.UserDefinedTemplate object&gt;, &lt;laygo2.object.template.UserDefinedTemplate object&gt;, &lt;laygo2.object.template.UserDefinedTemplate object&gt;, &lt;laygo2.object.template.UserDefinedTemplate object&gt;, &lt;laygo2.object.template.UserDefinedTemplate object&gt;, &lt;laygo2.object.template.UserDefinedTemplate object&gt;, &lt;laygo2.object.template.UserDefinedTemplate object&gt;]]</span>

<span class="sd">    .. image:: ../assets/img/object_grid_RoutingGrid_viamap.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    그리드 교차점에 위치하는 via개채들을 담고있는배열.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">primary_grid</span> <span class="o">=</span> <span class="s1">&#39;vertical&#39;</span>
    <span class="sd">&quot;&quot;&quot;str: Direction of wire having length 0.</span>

<span class="sd">    </span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; templates = tech.load_templates() </span>
<span class="sd">    &gt;&gt;&gt; grids = tech.load_grids(templates=templates) </span>
<span class="sd">    &gt;&gt;&gt; r23   = grids[&#39;routing_23_cmos’]</span>
<span class="sd">    &gt;&gt;&gt; print(r23.primary_grid) </span>
<span class="sd">    “horizontal”</span>

<span class="sd">    .. image:: ../assets/img/object_grid_RoutingGrid_primary_grid.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    길이가 0인 wire방향.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">xcolor</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;CircularMapping: Color of horizontal wires.</span>

<span class="sd">    </span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; templates = tech.load_templates() </span>
<span class="sd">    &gt;&gt;&gt; grids = tech.load_grids(templates=templates) </span>
<span class="sd">    &gt;&gt;&gt; r23   = grids[&#39;routing_23_cmos’] </span>
<span class="sd">    &gt;&gt;&gt; print(r23.xcolor) </span>
<span class="sd">    &lt;laygo2.object.grid.CircularMapping object&gt; class: CircularMapping, elements: [[“colorA”], [“colorB”], [“colorA”], [“colorB”], [“colorA”], [“colorB”], [“colorA”], [“colorB”]]</span>

<span class="sd">    .. image:: ../assets/img/object_grid_RoutingGrid_xcolor.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    수평 wire 들의 color.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ycolor</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;CircularMapping: Color of vertical wires.</span>

<span class="sd">    </span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; templates = tech.load_templates() </span>
<span class="sd">    &gt;&gt;&gt; grids = tech.load_grids(templates=templates) </span>
<span class="sd">    &gt;&gt;&gt; r23   = grids[&#39;routing_23_cmos’]</span>
<span class="sd">    &gt;&gt;&gt; print(r23.ycolor) </span>
<span class="sd">    &lt;laygo2.object.grid.CircularMapping object&gt; class: CircularMapping, elements: [[“colorA”]]</span>

<span class="sd">    .. image:: ../assets/img/object_grid_RoutingGrid_ycolor.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Reference in Korean:</span>
<span class="sd">    수직 wire들의 color.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="RoutingGrid.__init__"><a class="viewcode-back" href="../../../laygo2.object.grid.RoutingGrid.html#laygo2.object.grid.RoutingGrid.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">vgrid</span><span class="p">,</span> <span class="n">hgrid</span><span class="p">,</span> <span class="n">vwidth</span><span class="p">,</span> <span class="n">hwidth</span><span class="p">,</span> <span class="n">vextension</span><span class="p">,</span> <span class="n">hextension</span><span class="p">,</span> <span class="n">vlayer</span><span class="p">,</span> <span class="n">hlayer</span><span class="p">,</span> <span class="n">pin_vlayer</span><span class="p">,</span>
                 <span class="n">pin_hlayer</span><span class="p">,</span> <span class="n">viamap</span><span class="p">,</span> <span class="n">xcolor</span><span class="p">,</span> <span class="n">ycolor</span><span class="p">,</span> <span class="n">primary_grid</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span> <span class="n">vextension0</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hextension0</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor function of RoutingGrid class.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : str</span>
<span class="sd">            Routing object name</span>
<span class="sd">        vgrid : laygo2.OneDimGrid </span>
<span class="sd">            OneDimGrid of x-coordinate system</span>
<span class="sd">        hgrid : laygo2.OneDimGrid</span>
<span class="sd">            OneDimGrid of y-coordinate system</span>
<span class="sd">        vwidth : CircularMapping</span>
<span class="sd">            x-coordinate system width</span>
<span class="sd">        hwidth : CircularMapping</span>
<span class="sd">            y-coordinate system width</span>
<span class="sd">        vextension : CircularMapping</span>
<span class="sd">            x-coordinate system extension</span>
<span class="sd">        hextension : CircularMapping</span>
<span class="sd">            y-coordinate system extension</span>
<span class="sd">        vlayer : CircularMapping</span>
<span class="sd">            x-coordinate system layer</span>
<span class="sd">        hlayer : CircularMapping</span>
<span class="sd">            y-coordinate system layer</span>
<span class="sd">        pin_vlayer : CircularMapping</span>
<span class="sd">            layer of x-coordinate system pin</span>
<span class="sd">        pin_hlayer : CircularMapping</span>
<span class="sd">            layer of y-coordinate system pin</span>
<span class="sd">        xcolor : list</span>
<span class="sd">            x-coordinate system color</span>
<span class="sd">        ycolor : list</span>
<span class="sd">            y-coordinate system color</span>
<span class="sd">        viamap : CircularMappingArray</span>
<span class="sd">            Via map of Grid</span>
<span class="sd">        primary_grid : str</span>
<span class="sd">            direction of wire having length 0</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        laygo2.RoutingGrid</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        None</span>

<span class="sd">        .. image:: ../assets/img/object_grid_RoutingGrid_init.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        RoutingGrid 클래스의 생성자함수.</span>
<span class="sd">        파라미터</span>
<span class="sd">        name(str): Routing 객체의 이름</span>
<span class="sd">        vgrid(laygo2.OneDimGrid): x좌표계 OneDimGrid</span>
<span class="sd">        hgrid(laygo2.OneDimGrid): y좌표계 OneDimGrid</span>
<span class="sd">        vwidth(CircularMapping): x좌표계 Width</span>
<span class="sd">        hwidth(CircularMapping): y좌표계 Width</span>
<span class="sd">        vextension(CircularMapping): x좌표계의 extension</span>
<span class="sd">        hextension(CircularMapping): y좌표계의 extension</span>
<span class="sd">        vlayer(CircularMapping): x좌표계의 layer</span>
<span class="sd">        hlayer(CircularMapping): y좌표계의 layer</span>
<span class="sd">        pin_vlayer(CircularMapping): x좌표계 pin의 layer</span>
<span class="sd">        pin_hlayer(CircularMapping): y좌표계 pin의 layer</span>
<span class="sd">        xcolor(list): x좌표계 color</span>
<span class="sd">        ycolor(list): y좌표계 color</span>
<span class="sd">        viamap(CircularMappingArray): Grid의 Via map</span>
<span class="sd">        primary_grid(str): 길이가 0인 Wire방향</span>
<span class="sd">        반환값</span>
<span class="sd">        laygo2.RoutingGrid</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vwidth</span> <span class="o">=</span> <span class="n">vwidth</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hwidth</span> <span class="o">=</span> <span class="n">hwidth</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vextension</span> <span class="o">=</span> <span class="n">vextension</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hextension</span> <span class="o">=</span> <span class="n">hextension</span>
        <span class="k">if</span> <span class="n">vextension0</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vextension0</span> <span class="o">=</span> <span class="n">vextension</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vextension0</span> <span class="o">=</span> <span class="n">vextension0</span>
        <span class="k">if</span> <span class="n">hextension0</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hextension0</span> <span class="o">=</span> <span class="n">hextension</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hextension0</span> <span class="o">=</span> <span class="n">hextension0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vlayer</span> <span class="o">=</span> <span class="n">vlayer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hlayer</span> <span class="o">=</span> <span class="n">hlayer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pin_vlayer</span> <span class="o">=</span> <span class="n">pin_vlayer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pin_hlayer</span> <span class="o">=</span> <span class="n">pin_hlayer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viamap</span> <span class="o">=</span> <span class="n">viamap</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">primary_grid</span> <span class="o">=</span> <span class="n">primary_grid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xcolor</span> <span class="o">=</span> <span class="n">xcolor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ycolor</span> <span class="o">=</span> <span class="n">ycolor</span>
        <span class="n">Grid</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">vgrid</span><span class="o">=</span><span class="n">vgrid</span><span class="p">,</span> <span class="n">hgrid</span><span class="o">=</span><span class="n">hgrid</span><span class="p">)</span></div>

<div class="viewcode-block" id="RoutingGrid.route"><a class="viewcode-back" href="../../../laygo2.object.grid.RoutingGrid.html#laygo2.object.grid.RoutingGrid.route">[docs]</a>    <span class="k">def</span> <span class="nf">route</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mn</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">via_tag</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Wire routing function, generate Rect object.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        mn : list(numpy.ndarray)</span>
<span class="sd">            list containing two or more mn coordinates being connected</span>
<span class="sd">        direction : str, optional.</span>
<span class="sd">            None or “vertical” ; decides the direction of path as vertical or horizontal</span>
<span class="sd">        via_tag : list(Boolean), optional.</span>
<span class="sd">            list of switches deciding whether to form via on the path</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list: list containing the generated routing objects</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; r23=grids[“routing_23_cmos”]</span>
<span class="sd">        &gt;&gt;&gt; mn_list = [[0, -2], [0, 1], [2, 1], [5,1] ] </span>
<span class="sd">        &gt;&gt;&gt; route = r23.route(grid=mygrid, mn=mn_list, via_tag=[True, None, True, True]) </span>
<span class="sd">        &gt;&gt;&gt; print(route)</span>
<span class="sd">        [&lt;laygo2.object.physical.VirtualInstance object&gt;, &lt;laygo2.object.physical.Rect object&gt;, &lt;laygo2.object.physical.Rect object&gt;, &lt;laygo2.object.physical.VirtualInstance object&gt;, &lt;laygo2.object.physical.Rect object&gt;, &lt;laygo2.object.physical.VirtualInstance object&gt;]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_RoutingGrid_route.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        wire 라우팅 함수, rect object를 생성.</span>
<span class="sd">        파라미터</span>
<span class="sd">        mn(list(numpy.ndarray)): 2개이상의 연결할 mn 좌표를 갖고있는 list</span>
<span class="sd">        direction(str): None or “vertical”; path의 방향을 수평 or 수직을 결정 [optional]</span>
<span class="sd">        via_tag(list(Boolean)): Path에 via를 형성할지 switch들의 list [optional]</span>
<span class="sd">        반환값</span>
<span class="sd">        list: 생성된 routing object들을 담고 있는 list.</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mn</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">mn</span><span class="p">)</span>
        <span class="n">_mn</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">mn</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>  
            <span class="c1"># when more than two points are given,</span>
            <span class="c1"># create a multi-point wire compose of sub-routing wires</span>
            <span class="c1"># connecting the points given by mn in sequence.</span>
            <span class="n">_mn</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">mn</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="p">:],</span> <span class="n">mn</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]])</span>
        <span class="n">route</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="c1"># via at the starting point</span>
        <span class="k">if</span> <span class="n">via_tag</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">via_tag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">route</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">via</span><span class="p">(</span><span class="n">mn</span><span class="o">=</span><span class="n">_mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>
        <span class="c1"># routing wires</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">__mn</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">_mn</span><span class="p">):</span>
            <span class="n">xy0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs2phy</span><span class="p">[</span><span class="n">__mn</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
            <span class="n">xy1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs2phy</span><span class="p">[</span><span class="n">__mn</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
            <span class="n">_xy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">xy0</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">xy0</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="n">xy1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">xy1</span><span class="p">[</span><span class="mi">1</span><span class="p">]]])</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">xy0</span> <span class="o">==</span> <span class="n">xy1</span><span class="p">):</span>  <span class="c1"># if two points are identical, generate a metal stub on the bottom layer.</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;vertical&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">((</span><span class="n">direction</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_grid</span> <span class="o">==</span> <span class="s1">&#39;vertical&#39;</span><span class="p">)):</span>
                    <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vwidth</span><span class="p">[</span><span class="n">__mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span>
                    <span class="n">hextension</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
                    <span class="n">vextension</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vextension0</span><span class="p">[</span><span class="n">__mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span>
                    <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vlayer</span><span class="p">[</span><span class="n">__mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span>
                    <span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xcolor</span><span class="p">[</span><span class="n">__mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">xcolor</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="c1"># xcolor is determined by its grid layer.</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hwidth</span><span class="p">[</span><span class="n">__mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span>
                    <span class="n">hextension</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hextension0</span><span class="p">[</span><span class="n">__mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span>
                    <span class="n">vextension</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
                    <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hlayer</span><span class="p">[</span><span class="n">__mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span>
                    <span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycolor</span><span class="p">[</span><span class="n">__mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">ycolor</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="c1"># ycolor is determined by its grid layer.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">xy0</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">xy1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">or</span> <span class="p">(</span><span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;vertical&#39;</span><span class="p">):</span>  <span class="c1"># vertical routing</span>
                    <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vwidth</span><span class="p">[</span><span class="n">__mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span>
                    <span class="n">hextension</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
                    <span class="n">vextension</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vextension</span><span class="p">[</span><span class="n">__mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span>
                    <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vlayer</span><span class="p">[</span><span class="n">__mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span>
                    <span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xcolor</span><span class="p">[</span><span class="n">__mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">xcolor</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="c1"># xcolor is determined by its grid layer.</span>

                <span class="k">else</span><span class="p">:</span>  <span class="c1"># horizontal routing</span>
                    <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hwidth</span><span class="p">[</span><span class="n">__mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span>
                    <span class="n">hextension</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hextension</span><span class="p">[</span><span class="n">__mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span>
                    <span class="n">vextension</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
                    <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hlayer</span><span class="p">[</span><span class="n">__mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span>
                    <span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycolor</span><span class="p">[</span><span class="n">__mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">ycolor</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="c1"># ycolor is determined by its grid layer.</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">laygo2</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">physical</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">xy</span><span class="o">=</span><span class="n">_xy</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="n">layer</span><span class="p">,</span> <span class="n">hextension</span><span class="o">=</span><span class="n">hextension</span><span class="p">,</span> <span class="n">vextension</span><span class="o">=</span><span class="n">vextension</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
            <span class="n">route</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="c1"># via placement</span>
            <span class="k">if</span> <span class="n">via_tag</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">mn</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                    <span class="n">route</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">via</span><span class="p">(</span><span class="n">mn</span><span class="o">=</span><span class="n">__mn</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">via_tag</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">route</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">via</span><span class="p">(</span><span class="n">mn</span><span class="o">=</span><span class="n">__mn</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">route</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># not isinstance(mn[0][0], list):</span>
            <span class="k">return</span> <span class="n">route</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">route</span></div>

<div class="viewcode-block" id="RoutingGrid.via"><a class="viewcode-back" href="../../../laygo2.object.grid.RoutingGrid.html#laygo2.object.grid.RoutingGrid.via">[docs]</a>    <span class="k">def</span> <span class="nf">via</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mn</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Via generating function.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        mn : list(numpy.ndarray)</span>
<span class="sd">            mn coordinates for generating via, 2 or more</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list(physical.PhysicalObject): list containing the generated via objects</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; r23=grids[“routing_23_cmos”]</span>
<span class="sd">        &gt;&gt;&gt; mn_list = [[0, -2], [1, 0], [2, 5]]</span>
<span class="sd">        &gt;&gt;&gt; via = r23.via(mn=mn_list)</span>
<span class="sd">        &gt;&gt;&gt; print(via)</span>
<span class="sd">        [&lt;laygo2.object.physical.VirtualInstance object&gt;, &lt;laygo2.object.physical.VirtualInstance object&gt;, &lt;laygo2.object.physical.VirtualInstance object&gt;]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_RoutingGrid_via.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        via 생성함수.</span>
<span class="sd">        파라미터</span>
<span class="sd">        mn(list(numpy.ndarray)): via를 생성할 mn좌표, 2개이상 가능</span>
<span class="sd">        반환값</span>
<span class="sd">        list(physical.PhysicalObject)): 생성된 via object들을 담고 있는 list</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If mn contains multiple coordinates (or objects), place iteratively.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mn</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mn</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">)):</span>  <span class="c1"># It&#39;s actually a single coordinate.</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">via</span><span class="p">(</span><span class="n">mn</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">mn</span><span class="p">),</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">via</span><span class="p">(</span><span class="n">mn</span><span class="o">=</span><span class="n">_mn</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span> <span class="k">for</span> <span class="n">_mn</span> <span class="ow">in</span> <span class="n">mn</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mn</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mn</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">)):</span>  <span class="c1"># It&#39;s actually a single coordinate.</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">via</span><span class="p">(</span><span class="n">mn</span><span class="o">=</span><span class="n">_mn</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span> <span class="k">for</span> <span class="n">_mn</span> <span class="ow">in</span> <span class="n">mn</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mn</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">mn</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">mn</span><span class="p">)</span>  <span class="c1"># viamap (CircularMapping) works only with tuples</span>
        <span class="n">tvia</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">viamap</span><span class="p">[</span><span class="n">mn</span><span class="p">]</span>
        <span class="n">via</span> <span class="o">=</span> <span class="n">tvia</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="n">via</span><span class="o">.</span><span class="n">xy</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="n">mn</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">via</span></div>
    
<div class="viewcode-block" id="RoutingGrid.route_via_track"><a class="viewcode-back" href="../../../laygo2.object.grid.RoutingGrid.html#laygo2.object.grid.RoutingGrid.route_via_track">[docs]</a>    <span class="k">def</span> <span class="nf">route_via_track</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mn</span><span class="p">,</span> <span class="n">track</span><span class="p">,</span> <span class="n">via_tag</span><span class="o">=</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">True</span><span class="p">]</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Wire routing function; performs routing with track as a reference point.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        mn : list(numpy.ndarray)</span>
<span class="sd">            list containing coordinates of the points being connected through a track</span>
<span class="sd">        track : numpy.ndarray</span>
<span class="sd">            list containing coordinate values and direction of a track Vertical track has [v, None] format, while horizontal track has [None, v] format (v is the coordinates of the track)</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list: list containing the generated routing objects; the last object corresponds to the routing object on the track</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; r23=grids[“routing_23_cmos”]</span>
<span class="sd">        &gt;&gt;&gt; mn_list = [[0, -2], [1, 0], [2, 5], [3, 4], [4, 5], [5, 5]]</span>
<span class="sd">        &gt;&gt;&gt; track = r23.route_via_track(mn=mn_list, track=[None,0])</span>
<span class="sd">        &gt;&gt;&gt; print(track)</span>
<span class="sd">        [[&lt;laygo2.object.physical.Rect object&gt;, &lt;laygo2.object.physical.VirtualInstance object&gt;], &lt;laygo2.object.physical.VirtualInstance object&gt;, [&lt;laygo2.object.physical.Rect object&gt;, &lt;laygo2.object.physical.VirtualInstance object&gt;], [&lt;laygo2.object.physical.Rect object&gt;, &lt;laygo2.object.physical.VirtualInstance object&gt;], [&lt;laygo2.object.physical.Rect object&gt;, &lt;laygo2.object.physical.VirtualInstance object&gt;], [&lt;laygo2.object.physical.Rect object&gt;, &lt;laygo2.object.physical.VirtualInstance object&gt;], &lt;laygo2.object.physical.Rect object&gt;]</span>

<span class="sd">        .. image:: ../assets/img/object_grid_RoutingGrid_route_via_track.png</span>
<span class="sd">           :height: 250</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        wire 라우팅 함수, track을 기준점으로 routing을 진행한다.</span>
<span class="sd">        파라미터</span>
<span class="sd">        track(numpy.ndarray): track의 좌표값과 방향을 담고 있는 list. 수직 트랙일 경우 [v, None], 수평 트랙일 경우 [None, v]의 형태를 가지고 있다 (v는 track의 좌표값).</span>
<span class="sd">        mn(list(numpy.ndarray)): track을 통해 연결될 지점들의 좌표를 담고 있는 list.</span>
<span class="sd">        반환값</span>
<span class="sd">        list: 생성된 routing object들을 담고 있는 list. 마지막 object가 track위의 routing object에 해당.</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mn</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span> <span class="n">mn</span> <span class="p">)</span>    
        <span class="n">route</span>   <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="n">track</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>                <span class="c1"># x direction</span>
            <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>                           <span class="c1"># index of track axis</span>
            <span class="n">p</span> <span class="o">=</span> <span class="mi">1</span>                           <span class="c1"># index of perpendicular track</span>
            <span class="n">mn_pivot</span> <span class="o">=</span> <span class="n">track</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>                               <span class="c1"># y direction</span>
            <span class="n">t</span> <span class="o">=</span> <span class="mi">1</span>                           
            <span class="n">p</span> <span class="o">=</span> <span class="mi">0</span>                           
            <span class="n">mn_pivot</span> <span class="o">=</span> <span class="n">track</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">mn_b</span>       <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]]</span> <span class="p">)</span>                    <span class="c1"># 1.branch</span>
        <span class="n">min_t</span><span class="p">,</span> <span class="n">max_t</span> <span class="o">=</span> <span class="n">mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">t</span><span class="p">],</span> <span class="n">mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">t</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span><span class="n">mn</span><span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">mn_b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>    <span class="o">=</span> <span class="n">mn</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">mn_b</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_b</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">t</span><span class="p">]</span>
            <span class="n">mn_b</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">p</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_pivot</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span> <span class="n">mn_b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">,</span> <span class="n">mn_b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span>           <span class="c1">#### via only</span>
                <span class="n">route</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">via</span><span class="p">(</span> <span class="n">mn</span><span class="o">=</span> <span class="n">mn_b</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">route</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">route</span><span class="p">(</span> <span class="n">mn</span><span class="o">=</span> <span class="p">[</span> <span class="n">mn_b</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mn_b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">],</span> <span class="n">via_tag</span><span class="o">=</span><span class="n">via_tag</span> <span class="p">)</span> <span class="p">)</span>

            <span class="n">center_t</span> <span class="o">=</span> <span class="n">mn</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">t</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">center_t</span> <span class="o">&lt;</span> <span class="n">min_t</span><span class="p">:</span>
                <span class="n">min_t</span> <span class="o">=</span> <span class="n">center_t</span>
            <span class="k">elif</span> <span class="n">max_t</span> <span class="o">&lt;</span> <span class="n">center_t</span><span class="p">:</span>
                <span class="n">max_t</span> <span class="o">=</span> <span class="n">center_t</span>

        <span class="n">mn_track</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]]</span> <span class="p">)</span>                       <span class="c1"># 2.track</span>
        <span class="n">mn_track</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">t</span><span class="p">],</span> <span class="n">mn_track</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">p</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_t</span><span class="p">,</span> <span class="n">mn_pivot</span>  <span class="c1"># min</span>
        <span class="n">mn_track</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">t</span><span class="p">],</span> <span class="n">mn_track</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">p</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_t</span><span class="p">,</span> <span class="n">mn_pivot</span> <span class="c1"># max</span>

        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span> <span class="n">mn_track</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">,</span> <span class="n">mn_track</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>  <span class="p">:</span>  <span class="c1"># Skip</span>
            <span class="n">route</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">route</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">route</span><span class="p">(</span> <span class="n">mn</span><span class="o">=</span> <span class="n">mn_track</span> <span class="p">)</span> <span class="p">)</span>
        
        <span class="k">return</span> <span class="n">route</span></div>
 
<div class="viewcode-block" id="RoutingGrid.pin"><a class="viewcode-back" href="../../../laygo2.object.grid.RoutingGrid.html#laygo2.object.grid.RoutingGrid.pin">[docs]</a>    <span class="k">def</span> <span class="nf">pin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">mn</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">netname</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1">#pin0 = Pin(xy=[[0, 0], [100, 100]], layer=[&#39;M1&#39;, &#39;drawing&#39;], netname=&#39;net0&#39;, master=rect0,</span>
        <span class="c1">#           params={&#39;direction&#39;: &#39;input&#39;})</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Pin generating function.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : str</span>
<span class="sd">            Pin name</span>
<span class="sd">        mn : numpy.ndarray</span>
<span class="sd">            Abstract coordinates for generating Pin</span>
<span class="sd">        direction : str, optional.</span>
<span class="sd">            Direction</span>
<span class="sd">        netname : str, optional.</span>
<span class="sd">            Net name of Pin</span>
<span class="sd">        params : dict, optional</span>
<span class="sd">            Pin attribute</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        laygo2.physical.Pin: Pin object</span>

<span class="sd">        </span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; mn_list = [ [0, 0], [10, 10]] </span>
<span class="sd">        &gt;&gt;&gt; pin = r23.pin(mn=mn_list, name=&quot;pin&quot;)</span>
<span class="sd">        &gt;&gt;&gt; print(&quot;pin&quot;) </span>
<span class="sd">        &lt;laygo2.object.physical.Pin object&gt; name: pin, class: Pin, xy: [[0, 5], [300, 265]]……</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Reference in Korean:</span>
<span class="sd">        pin 생성함수.</span>
<span class="sd">        파라미터</span>
<span class="sd">        name(str): Pin 이름</span>
<span class="sd">        mn(numpy.ndarray): Pin을 생성할 abstract 좌표</span>
<span class="sd">        direction(str): 방향 [optional]</span>
<span class="sd">        netname(str): Pin의 net이름 [optional]</span>
<span class="sd">        params(dict): Pin 속성 [optional]</span>
<span class="sd">        반환값</span>
<span class="sd">        laygo2.physical.Pin: Pin object</span>
<span class="sd">        참조</span>
<span class="sd">        없음</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xy0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs2phy</span><span class="p">[</span><span class="n">mn</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="n">xy1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs2phy</span><span class="p">[</span><span class="n">mn</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
        <span class="c1">#_xy = np.array([[xy0[0], xy0[1]], [xy1[0], xy1[1]]])</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">xy0</span> <span class="o">==</span> <span class="n">xy1</span><span class="p">):</span>  <span class="c1"># if two points are identical, generate a metal stub on the bottom layer.</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;vertical&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">((</span><span class="n">direction</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_grid</span> <span class="o">==</span> <span class="s1">&#39;vertical&#39;</span><span class="p">)):</span>
                <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vwidth</span><span class="p">[</span><span class="n">mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span>
                <span class="n">hextension</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">vextension</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pin_vlayer</span><span class="p">[</span><span class="n">mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hwidth</span><span class="p">[</span><span class="n">mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span>
                <span class="n">hextension</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">vextension</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pin_hlayer</span><span class="p">[</span><span class="n">mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">xy0</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">xy1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">or</span> <span class="p">(</span><span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;vertical&#39;</span><span class="p">):</span>  <span class="c1"># vertical routing</span>
                <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vwidth</span><span class="p">[</span><span class="n">mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span>
                <span class="n">hextension</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">vextension</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pin_vlayer</span><span class="p">[</span><span class="n">mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># horizontal routing</span>
                <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hwidth</span><span class="p">[</span><span class="n">mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span>
                <span class="n">hextension</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">vextension</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pin_hlayer</span><span class="p">[</span><span class="n">mn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span>
        <span class="c1"># TODO: pin.xy differ from tech.py.</span>
        <span class="n">_xy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">xy0</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">hextension</span><span class="p">,</span> <span class="n">xy0</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">vextension</span><span class="p">],</span> <span class="p">[</span><span class="n">xy1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">hextension</span><span class="p">,</span> <span class="n">xy1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">vextension</span><span class="p">]])</span> <span class="c1">## need to check</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">laygo2</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">physical</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="n">_xy</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="n">layer</span><span class="p">,</span> <span class="n">netname</span><span class="o">=</span><span class="n">netname</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">p</span></div></div>


<span class="k">class</span> <span class="nc">ParameterizedGrid</span><span class="p">(</span><span class="n">Grid</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A parameterized grid to support flexible templates.&quot;&quot;&quot;</span>
    <span class="c1"># TODO: implement this.</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">ParameterizedPlacementGrid</span><span class="p">(</span><span class="n">Grid</span><span class="p">):</span>
    <span class="c1"># TODO: implement this.</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">ParameterizedRoutingGrid</span><span class="p">(</span><span class="n">Grid</span><span class="p">):</span>
    <span class="c1"># TODO: implement this.</span>
    <span class="k">pass</span>


</pre></div>

              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021, Niftylab at Hanyang University, South Korea.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>